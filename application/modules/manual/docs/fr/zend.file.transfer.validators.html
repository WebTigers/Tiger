<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Validateurs pour Zend_File_Transfer</title>
<link rel="stylesheet" type="text/css" href="dbstyle.css">
<meta name="generator" content="DocBook XSL Stylesheets V1.79.2">
<link rel="home" href="index.html" title="Guide de référence du programmeur">
<link rel="up" href="zend.file.html" title="Zend_File">
<link rel="prev" href="zend.file.transfer.introduction.html" title="Zend_File_Transfer">
<link rel="next" href="zend.file.transfer.filters.html" title="Filtres pour Zend_File_Transfer">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader"><table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">Validateurs pour Zend_File_Transfer</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="zend.file.transfer.introduction.html">Précédent</a> </td>
<th width="60%" align="center">Zend_File</th>
<td width="20%" align="right"> <a accesskey="n" href="zend.file.transfer.filters.html">Suivant</a>
</td>
</tr>
</table></div>
<div class="sect1">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="zend.file.transfer.validators"></a>Validateurs pour Zend_File_Transfer</h2></div></div></div>
    

    <p>
        <code class="classname">Zend_File_Transfer</code> est fourni avec de multiples validateurs
        liés qui doivent être utiliser pour accroître la sécurité et prévenir les attaques
        possibles. Notez que les validateurs ne sont bons que si vous les utilisez. Tous les
        validateurs qui sont fournis avec <code class="classname">Zend_File_Transfer</code> peuvent être
        trouvés avec le composant <code class="classname">Zend_Validator</code> et sont nommés
        <code class="classname">Zend_Validate_File_*</code>. Les validateurs suivants sont actuellement
        disponibles :
    </p>

    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
            <p>
                <code class="code">Count</code> : ce validateur vérifie le nombre de fichiers. Il est
                possible de définir un minimum et un maximum et une erreur sera lancée s'ils sont
                dépassés.
            </p>
        </li>
<li class="listitem">
            <p>
                <code class="code">Crc32</code> : ce validateur vérifie la valeur de hachage crc32 du
                contenu d'un fichier. Il est basé sur le validateur <code class="code">Hash</code> et en
                simplifiant son utilisation par le support unique du Crc32.
            </p>
        </li>
<li class="listitem">
            <p>
                <code class="code">ExcludeExtension</code> : ce validateur vérifie l'extension des
                fichiers. Il lancera une erreur quand un fichier aura une extension non souhaitée.
                Ainsi vous pouvez empêcher la validation de certaines extensions.
            </p>
        </li>
<li class="listitem">
            <p>
                <code class="code">ExcludeMimeType</code> : ce validateur vérifie le type <acronym class="acronym">MIME</acronym> des
                fichiers. Il est aussi capable de valider un groupe de type <acronym class="acronym">MIME</acronym> et générera une
                erreur quand le type <acronym class="acronym">MIME</acronym> d'un fichier donné correspond.
            </p>
        </li>
<li class="listitem">
            <p>
                <code class="code">Exists</code> : ce validateur vérifie l'existence des fichiers. Il
                lancera une erreur quand un fichier n'existera pas.
            </p>
        </li>
<li class="listitem">
            <p>
                <code class="code">Extension</code> : ce validateur vérifie l'extension des fichiers. Il
                lancera une erreur quand un fichier n'aura pas l'extension définie.
            </p>
        </li>
<li class="listitem">
            <p>
                <code class="code">FilesSize</code> : ce validateur vérifie la taille complète de tous les
                fichiers à valider. Il conserve en mémoire la taille de tous les fichiers chargés et
                lance une erreur quand la somme de tous les fichiers dépasse la taille définie. Il
                est aussi possible de définir une taille minimum et maximum.
            </p>
        </li>
<li class="listitem">
            <p>
                <code class="code">ImageSize</code> : ce validateur vérifie la taille des images. Il valide
                la largeur et la hauteur et permet de paramétrer à la fois une valeur minimum et
                maximum.
            </p>
        </li>
<li class="listitem">
            <p>
                <code class="code">IsCompressed</code> : ce validateur vérifie si le fichier est compressé.
                Il est basé sur le validateur <code class="code">MimeType</code> et valide les archives
                compressées comme zip ou arc. Vous pouvez aussi limiter à des types d'archives
                particuliers.
            </p>
        </li>
<li class="listitem">
            <p>
                <code class="code">IsImage</code> : ce validateur vérifie si un fichier est une image. Il
                est basé sur le validateur <code class="code">MimeType</code> et valide les images comme jpg ou
                gif. Vous pouvez aussi limiter à des types d'images particuliers.
            </p>
        </li>
<li class="listitem">
            <p>
                <code class="code">Hash</code> : ce validateur vérifie la valeur de hachage md5 du contenu
                d'un fichier. Il supporte de multiples algorithmes.
            </p>
        </li>
<li class="listitem">
            <p>
                <code class="code">Md5</code> : ce validateur vérifie la valeur de hachage md5 du contenu
                d'un fichier. Il est basé sur le validateur <code class="code">Hash</code> et en simplifiant son
                utilisation par le support unique du Md5.
            </p>
        </li>
<li class="listitem">
            <p>
                <code class="code">MimeType</code> : ce validateur vérifie le type <acronym class="acronym">MIME</acronym> des fichiers. Il
                est aussi capable de valider des groupes de type <acronym class="acronym">MIME</acronym> et de générer une erreur quand
                le type <acronym class="acronym">MIME</acronym> d'un fichier donné ne correspond pas.
            </p>
        </li>
<li class="listitem">
            <p>
                <code class="code">NotExists</code> : ce validateur vérifie l'existence des fichiers. Il
                lancera une erreur quand un fichier existera déjà.
            </p>
        </li>
<li class="listitem">
            <p>
                <code class="code">Sha1</code> : ce validateur vérifie la valeur de hachage sha1 du contenu
                d'un fichier. Il est basé sur le validateur <code class="code">Hash</code> et en simplifiant son
                utilisation par le support unique du Sha1.
            </p>
        </li>
<li class="listitem">
            <p>
                <code class="code">Size</code> : ce validateur permet de valider la taille d'un fichier en
                particulier. Il est possible de définir un minimum et un maximum et une erreur sera
                lancée s'ils sont dépassés.
            </p>
        </li>
<li class="listitem">
            <p>
                <code class="code">Upload</code> : ce validateur est interne, il vérifie si l'upload a
                produit une erreur. Vous ne devez pas le paramétrer, il est automatiquement activé
                par<code class="code"> Zend_File_Transfer</code> lui-même. Vous pouvez donc oublier ce
                validateur. Il faut juste savoir qu'il existe.
            </p>
        </li>
<li class="listitem">
            <p>
                <code class="code">WordCount</code> : ce validateur est capable de vérifier le nombre de
                mots à l'intérieur du fichier. Il permet de définir des valeurs minimum et maximum
                et émettra une erreur si l'un ou l'autre des seuils est dépassé.
            </p>
        </li>
</ul></div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.file.transfer.validators.usage"></a>Utiliser les validateurs avec Zend_File_Transfer</h3></div></div></div>
        

        <p>
            L'utilisation des validateurs est assez simple. Il existe de multiples méthodes
            pour ajouter et manipuler les validateurs.
        </p>

        <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
                <p>
                    <code class="methodname">isValid($files = null)</code> : vérifie le(s) fichier(s) fourni(s)
                    avec tout le jeu de validateurs paramétrés. <code class="varname">$files</code> peut être soit
                    un vrai nom de fichier, soit des noms d'éléments de formulaire ou des noms de
                    fichiers temporaires.
                </p>
            </li>
<li class="listitem">
                <p>
                    <code class="code">addValidator($validator, $breakChainOnFailure, $options = null,
                    $files = null)</code> : ajoute le validateur à la pile des validateurs
                    (optionnellement seul le(s) fichier(s) spécifié(s)). <code class="varname">$validator</code>
                    peut être soit une instance d'un validateur réel, ou un nom court spécifiant le
                    validateur (par exemple, "Count").
                </p>
            </li>
<li class="listitem">
                <p>
                    <code class="methodname">addValidators(array $validators, $files = null)</code> : ajoute les
                    validateurs à la pile des validateurs. Chaque entrée peut être soit une paire
                    type/options, ou un tableau avec la clé "validator" spécifiant le validateur
                    (tous les autres options seront considérées comme des options du validateur au
                    moment de l'instanciation).
                </p>
            </li>
<li class="listitem">
                <p>
                    <code class="methodname">setValidators(array $validators, $files = null)</code> : surcharge
                    les validateurs existants avec les validateurs spécifiés. Les validateurs
                    doivent respecter la même syntaxe que <code class="methodname">addValidators()</code>.
                </p>
            </li>
<li class="listitem">
                <p>
                    <code class="methodname">hasValidator($name)</code> : indique si un validateur est enregistré.
                </p>
            </li>
<li class="listitem">
                <p>
                    <code class="methodname">getValidator($name)</code> : retourne un validateur préalablement
                    enregistré.
                </p>
            </li>
<li class="listitem">
                <p>
                    <code class="methodname">getValidators($files = null)</code> : retourne les validateurs
                    enregistrés ; si <code class="varname">$files</code> est fourni, retourne les validateurs
                    pour ce fichier en particulier ou pour tous les fichiers.
                </p>
            </li>
<li class="listitem">
                <p>
                    <code class="methodname">removeValidator($name)</code> : enlève le validateur préalablement
                    enregistré.
                </p>
            </li>
<li class="listitem">
                <p><code class="methodname">clearValidators()</code> : efface tous les validateurs.</p>
            </li>
</ul></div>

        <div class="example">
<a name="zend.file.transfer.validators.usage.example"></a><p class="title"><b>Exemple 404. Ajouter des validateurs au(x) fichier(s) transféré(s)</b></p>
<div class="example-contents">
            

            <pre class="programlisting">
$upload = new Zend_File_Transfer();

// Paramètre un poids de fichier de 20000 octets
$upload-&gt;addValidator('Size', false, 20000);

// Paramètre un poids de fichier de 20 octets minimum
// et de 20000 octets maximum
$upload-&gt;addValidator('Size', false, array('min' =&gt; 20, 'max' =&gt; 20000));

// Paramètre un poids de fichier de 20 octets minimum et
// de 20000 octets maximum et un nombre de fichiers en une seule étape
$upload-&gt;setValidators(array(
    'Size'  =&gt; array('min' =&gt; 20, 'max' =&gt; 20000),
    'Count' =&gt; array('min' =&gt; 1, 'max' =&gt; 3),
));
</pre>
        </div>
</div>
<br class="example-break">

        <div class="example">
<a name="zend.file.transfer.validators.usage.exampletwo"></a><p class="title"><b>Exemple 405. Limiter les validateurs à des fichiers uniques</b></p>
<div class="example-contents">
            

            <p>
                <code class="methodname">addValidator()</code>, <code class="methodname">addValidators()</code>, et
                <code class="methodname">setValidators()</code> accepte chacun un argument final <code class="varname">$files</code>.
                Cet argument peut être utilisé pour spécifier un fichier en particulier ou un
                tableau de fichiers sur lequel appliqué le validateur donné.
            </p>

            <pre class="programlisting">
$upload = new Zend_File_Transfer();

// Paramètre un poids de fichier de 20000 octets et
// limite celui-ci à 'file2'
$upload-&gt;addValidator('Size', false, 20000, 'file2');
</pre>
        </div>
</div>
<br class="example-break">

        <p>
            Généralement vous devriez simplement utiliser la méthode
            <code class="methodname">addValidators()</code>, qui peut être appelée plusieurs fois.
        </p>

        <div class="example">
<a name="zend.file.transfer.validators.usage.examplemultiple"></a><p class="title"><b>Exemple 406. Ajouter des validateurs multiples</b></p>
<div class="example-contents">
            

            <p>
                Souvent il est plus simple d'appeler plusieurs fois
                <code class="methodname">addValidator()</code> : un appel pour chaque validateur. Ceci améliore
                aussi la lisibilité et rend votre code plus maintenable. Comme toutes les méthodes
                fournissent un interface fluide, vous pouvez enchaîner les appels comme montré
                ci-dessous :
            </p>

            <pre class="programlisting">
$upload = new Zend_File_Transfer();

// Paramètre un poids de fichier de 20000 octets
$upload-&gt;addValidator('Size', false, 20000)
       -&gt;addValidator('Count', false, 2)
       -&gt;addValidator('Filessize', false, 25000);
</pre>
        </div>
</div>
<br class="example-break">

        <div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
            <p>
                Notez que même si l'ajout du même validateur plusieurs fois est autorisé,
                faire ceci peut entraîner des problèmes si vous utilisez différentes options pour le
                même validateur.
            </p>
        </td></tr>
</table></div>

        <p>
            Et pour finir vous pouvez tout simplement vérifier le(s) fichier(s) en appelant
            <code class="methodname">isValid()</code>.
        </p>

        <div class="example">
<a name="zend.file.transfer.validators.usage.exampleisvalid"></a><p class="title"><b>Exemple 407. Valider les fichiers</b></p>
<div class="example-contents">
            

            <p>
                <code class="methodname">isValid()</code> accepte les fichiers uploadés ou télécharger, le nom de
                fichier temporaire et bien sûr le nom de l'élément de formulaire. Si aucun paramètre
                ou <code class="constant">NULL</code> est fourni, tous les fichiers seront vérifiés.
            </p>

            <pre class="programlisting">
$upload = new Zend_File_Transfer();

// Paramètre un poids de fichier de 20000 octets
$upload-&gt;addValidator('Size', false, 20000)
       -&gt;addValidator('Count', false, 2)
       -&gt;addValidator('Filessize', false, 25000);

if (!$upload-&gt;isValid()) {
    print "Echec de validation";
}
</pre>
        </div>
</div>
<br class="example-break">

        <div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
            <p>
                Notez que <code class="methodname">isValid()</code> sera automatiquement appelé quand vous
                recevez les fichiers et qu'il n'a pas été appelé auparavant.
            </p>
        </td></tr>
</table></div>

        <p>
            Quand une validation a échouée, c'est probablement intéressant d'avoir des
            informations sur les problèmes rencontrés. A cette fin, vous pouvez utiliser la méthode
            <code class="methodname">getMessages()</code> qui retourne tous les messages de validation sous la forme
            d'un tableau, <code class="methodname">getErrors()</code> qui retourne tous les codes d'erreurs et
            <code class="methodname">hasErrors()</code> qui retourne <code class="constant">TRUE</code> dès qu'une erreur de validation
            est rencontrée.
        </p>
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.file.transfer.validators.count"></a>Validateur Count</h3></div></div></div>
        

        <p>
            Le validateur <code class="code">Count</code> vérifie le nombre de fichiers fournis. Il
            supporte les clés d'options suivantes :
        </p>

        <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
                <p>
                    <code class="code">min</code> : paramètre le nombre minimum de fichiers à
                    transférer.
                </p>

                <div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
                    <p>
                        Attention : quand vous utilisez cette option vous devez donner le
                        nombre minimum au moment où vous appelez ce validateur la première fois ;
                        sinon vous aurez une erreur en retour.
                    </p>
                </td></tr>
</table></div>

                <p>
                    Avec cette option vous pouvez définir le nombre de fichiers que vous
                    souhaitez recevoir.
                </p>
            </li>
<li class="listitem">
                <p>
                    <code class="code">max</code> : paramètre le nombre maximum de fichiers à
                    transférer.
                </p>

                <p>
                    Avec cette option vous pouvez limiter le nombre de fichiers que vous
                    acceptez mais vous permet aussi de détecter une possible attaque quand plus de
                    fichiers, que votre formulaire n'en définit, sont fournis.
                </p>
            </li>
</ul></div>

        <p>
            Vous pouvez initialiser ce validateur avec une chaîne ou un entier, la valeur sera
            utilisée en tant que <code class="code">max</code>. Mais vous pouvez aussi utiliser les méthodes
            <code class="methodname">setMin()</code> et <code class="methodname">setMax()</code> pour paramétrer ces options plus tard et
            <code class="methodname">getMin()</code> et <code class="methodname">getMax()</code> pour les récupérer.
        </p>

        <div class="example">
<a name="zend.file.transfer.validators.count.example"></a><p class="title"><b>Exemple 408. Utiliser le validateur Count</b></p>
<div class="example-contents">
            

            <pre class="programlisting">
$upload = new Zend_File_Transfer();

// Limite le nombre de fichiers à 2 maximum
$upload-&gt;addValidator('Count', false, 2);

// Limite le nombre de fichiers à 5 maximum,
// tout en obligeant au moins 1 fichier
$upload-&gt;addValidator('Count', false, array('min' =&gt;1, 'max' =&gt; 5));
</pre>
        </div>
</div>
<br class="example-break">

        <div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
            <p>
                Notez que ce validateur stocke le nombre de fichiers vérifiés en interne. Le
                fichier qui excédera le maximum sera retourné en tant qu'erreur.
            </p>
        </td></tr>
</table></div>
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.file.transfer.validators.crc32"></a>Validateur Crc32</h3></div></div></div>
        

        <p>
            Le validateur <code class="code">Crc32</code> vérifie le contenu du fichier transféré en le
            hachant. Ce validateur utilise l'extension de hachage de <acronym class="acronym">PHP</acronym> avec l'algorithme crc32. Il
            supporte les options suivantes :
        </p>

        <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
                <p>
                    <code class="code">*</code> : vous pouvez paramétrer n'importe quelle clé ou utiliser
                    un tableau numérique. Les valeurs seront utilisées pour vérifier la valeur de
                    hachage.
                </p>

                <p>
                    Vous pouvez paramétrer de multiples hachages en utilisant différentes
                    clés. Chacun sera vérifié et seulement si tous échouent, la validation elle-même
                    échouera.
                </p>
            </li></ul></div>

        <div class="example">
<a name="zend.file.transfer.validators.crc32.example"></a><p class="title"><b>Exemple 409. Utiliser le validateur Crc32</b></p>
<div class="example-contents">
            

            <pre class="programlisting">
$upload = new Zend_File_Transfer();

// Vérifie si le contenu d'un fichier uploadé correspond au hachage fourni
$upload-&gt;addValidator('Crc32', false, '3b3652f');

// Limite ce validateur à deux différents hachages
$upload-&gt;addValidator('Crc32', false, array('3b3652f', 'e612b69'));
</pre>
        </div>
</div>
<br class="example-break">
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.file.transfer.validators.excludeextension"></a>Validateur ExcludeExtension</h3></div></div></div>
        

        <p>
            Le validateur <code class="code">ExcludeExtension</code> vérifie l'extension des fichiers
            fournis. Il supporte les options suivantes :
        </p>

        <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
                <p>
                    <code class="code">*</code> : vous pouvez paramétrer n'importe quelle clé ou utiliser un
                    tableau numérique. Les valeurs seront utilisées en tant qu'extensions à vérifier
                    que le fichier n'utilise pas.
                </p>
            </li>
<li class="listitem">
                <p>
                    <code class="code">case</code> : paramètre une validation qui tient compte de la casse.
                    Par défaut, ce n'est pas sensible à la casse. Notez que cette clé est utilisée
                    pour toutes les extensions.
                </p>
            </li>
</ul></div>

        <p>
            Ce validateur accepte des extensions multiples soit sous la forme d'une chaîne
            utilisant le caractère virgule (",") comme séparateur ou sous la forme d'un tableau.
            Vous pouvez aussi utiliser les méthodes <code class="methodname">setExtension()</code>,
            <code class="methodname">addExtension()</code>, et <code class="methodname">getExtension()</code> pour paramétrer et récupérer
            les extensions.
        </p>

        <p>
            Dans certains cas, il est utile vérifier aussi la casse. A cette fin le
            constructeur autorise un second paramètre <code class="varname">$case</code> qui, s'il est réglé à
            <code class="constant">TRUE</code>, validera l'extension en vérifiant aussi la casse.
        </p>

        <div class="example">
<a name="zend.file.transfer.validators.excludeextension.example"></a><p class="title"><b>Exemple 410. Utiliser le validateur ExcludeExtension</b></p>
<div class="example-contents">
            

            <pre class="programlisting">
$upload = new Zend_File_Transfer();

// Refuser les fichiers avec l'extension php ou exe
$upload-&gt;addValidator('ExcludeExtension', false, 'php,exe');

// Refuser les fichiers avec l'extension php ou exe en utilisant
// la notation de type tableau
$upload-&gt;addValidator('ExcludeExtension', false, array('php', 'exe'));

// Vérifier aussi la casse
$upload-&gt;addValidator('ExcludeExtension', false, array('php', 'exe', 'case' =&gt; true));
</pre>
        </div>
</div>
<br class="example-break">

        <div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
            <p>
                Notez que ce validateur ne vérifie que l'extension de fichier. Il ne vérifie
                pas le type <acronym class="acronym">MIME</acronym> réel du fichier.
            </p>
        </td></tr>
</table></div>
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.file.transfer.validators.excludemimetype"></a>Validateur ExcludeMimeType</h3></div></div></div>
        

        <p>
            Le validateur <code class="code">ExcludeMimeType</code> vérifie le type <acronym class="acronym">MIME</acronym> des fichiers
            transférés. Il supporte les options suivantes :
        </p>

        <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
                <p>
                    <code class="code">*</code> : vous pouvez paramétrer n'importe quelle clé ou utiliser un
                    tableau numérique. Paramètre le type <acronym class="acronym">MIME</acronym> à vérifier.
                </p>

                <p>
                    Avec cette option vous pouvez définir le(s) type(s) <acronym class="acronym">MIME</acronym> que vous
                    souhaitez exclure.
                </p>
            </li>
<li class="listitem">
                <p>
                    <code class="code">headerCheck</code> : si spécifié à <code class="constant">TRUE</code>, cette
                    option va vérifier l'information <acronym class="acronym">HTTP</acronym> concernant le type de
                    fichier quand les extensions <span class="emphasis"><em>fileInfo</em></span> ou
                    <span class="emphasis"><em>mimeMagic</em></span> ne seront pas trouvées. La valeur par défaut de
                    cette option est <code class="constant">FALSE</code>.
                </p>
            </li>
</ul></div>

        <p>
            Ce validateur accepte des types <acronym class="acronym">MIME</acronym> multiples soit sous la forme d'une chaîne
            utilisant le caractère virgule (",") comme séparateur ou sous la forme d'un tableau.
            Vous pouvez aussi utiliser les méthodes <code class="methodname">setMimeType()</code>,
            <code class="methodname">addMimeType()</code>, et <code class="methodname">getMimeType()</code> pour paramétrer et récupérer
            les types <acronym class="acronym">MIME</acronym>.
        </p>

        <div class="example">
<a name="zend.file.transfer.validators.excludemimetype.example"></a><p class="title"><b>Exemple 411. Utiliser le validateur ExcludeMimeType</b></p>
<div class="example-contents">
            

            <pre class="programlisting">
$upload = new Zend_File_Transfer();

// Refuser le type MIME d'image gif pour tous les fichiers
$upload-&gt;addValidator('ExcludeMimeType', false, 'image/gif');

// Refuser le type MIME d'image gif et jpg pour tous les fichiers
$upload-&gt;addValidator('ExcludeMimeType', false, array('image/gif', 'image/jpeg');

// Refuser les types MIME du groupe image pour tous les fichiers
$upload-&gt;addValidator('ExcludeMimeType', false, 'image');
</pre>
        </div>
</div>
<br class="example-break">

        <p>
            L'exemple ci-dessus montre qu'il est aussi possible de limiter le type <acronym class="acronym">MIME</acronym>
            accepté à un groupe de type <acronym class="acronym">MIME</acronym>. Pour refuser toutes les images utilisez simplement
            "image" en tant que type <acronym class="acronym">MIME</acronym>. Ceci peut être appliqué à tous les groupes de type <acronym class="acronym">MIME</acronym>
            comme "image", "audio", "video", "text" et plus encore.
        </p>

        <div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
            <p>
                Notez que refuser un groupe de type <acronym class="acronym">MIME</acronym> refusera tous les membres de ce
                groupe même si ce n'est pas votre intention. Par exemple quand vous refusez "image",
                vous refusez donc "image/jpeg" ou "image/vasa". Quand vous n'êtes pas sûr de vouloir
                refuser tous les types, vous devriez définir individuellement les types <acronym class="acronym">MIME</acronym> plutôt
                que le groupe complet.
            </p>
        </td></tr>
</table></div>
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.file.transfer.validators.exists"></a>Validateur Exists</h3></div></div></div>
        

        <p>
            Le validateur <code class="code">Exists</code> l'existence des fichiers fournis. Il supporte
            les options suivantes :
        </p>

        <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
                <p>
                    <code class="code">*</code> : vous pouvez paramétrer n'importe quelle clé ou utiliser
                    un tableau numérique. Vérifie si le fichier existe dans le dossier
                    fourni.
                </p>
            </li></ul></div>

        <p>
            Ce validateur accepte des extensions multiples soit sous la forme d'une chaîne
            utilisant le caractère virgule (",") comme séparateur ou sous la forme d'un tableau.
            Vous pouvez aussi utiliser les méthodes <code class="methodname">setDirectory()</code>,
            <code class="methodname">addDirectory()</code>, et <code class="methodname">getDirectory()</code> pour paramétrer et récupérer
            les extensions.
        </p>

        <div class="example">
<a name="zend.file.transfer.validators.exists.example"></a><p class="title"><b>Exemple 412. Utiliser le validateur Exists</b></p>
<div class="example-contents">
            

            <pre class="programlisting">
$upload = new Zend_File_Transfer();

// Ajoute le dossier temporaire à vérifier
$upload-&gt;addValidator('Exists', false, '\temp');

// Ajoute deux dossiers en utilsant la notation de type tableau
$upload-&gt;addValidator('Exists',
                      false,
                      array('\home\images', '\home\uploads'));
</pre>
        </div>
</div>
<br class="example-break">

        <div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
            <p>
                Notez que ce validateur vérifie si le fichier existe dans tous les dossiers
                fournis. La validation échoue si le fichier est manquant dans l'un des
                dossiers.
            </p>
        </td></tr>
</table></div>
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.file.transfer.validators.extension"></a>Validateur Extension</h3></div></div></div>
        

        <p>
            Le validateur <code class="code">Extension</code> vérifie l'=es extensions des fichiers qui ont
            été fournis. Il supporte les options suivantes :
        </p>

        <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
                <p>
                    <code class="code">*</code> : vous pouvez paramétrer n'importe quelle clé ou utiliser
                    un tableau numérique. Paramètre l'extension à vérifier.
                </p>
            </li>
<li class="listitem">
                <p>
                    <code class="code">case</code> : paramètre une validation sensible à la casse. Par
                    défaut, la validation n'est pas sensible à la casse. Notez que cette clé est
                    utilisée pour toutes les extensions.
                </p>
            </li>
</ul></div>

        <p>
            Ce validateur accepte des extensions multiples soit sous la forme d'une chaîne
            utilisant le caractère virgule (",") comme séparateur ou sous la forme d'un tableau.
            Vous pouvez aussi utiliser les méthodes <code class="methodname">setExtension()</code>,
            <code class="methodname">addExtension()</code>, et <code class="methodname">getExtension()</code> pour paramétrer et récupérer
            les extensions.
        </p>

        <p>
            Dans certains cas, il est utile vérifier aussi la casse. A cette fin le
            constructeur autorise un second paramètre <code class="varname">$case</code> qui, s'il est réglé à
            <code class="constant">TRUE</code>, validera l'extension en vérifiant aussi la casse.
        </p>

        <div class="example">
<a name="zend.file.transfer.validators.extension.example"></a><p class="title"><b>Exemple 413. Utiliser le validateur Extension</b></p>
<div class="example-contents">
            

            <pre class="programlisting">
$upload = new Zend_File_Transfer();

// Limite les extensions à jpg et png
$upload-&gt;addValidator('Extension', false, 'jpg,png');

// Limite les extensions à jpg et png en utilisant
// la notation de type tableau
$upload-&gt;addValidator('Extension', false, array('jpg', 'png'));

// Vérifie aussi la casse
$upload-&gt;addValidator('Extension', false, array('mo', 'png', 'case' =&gt; true));
if (!$upload-&gt;isValid('C:\temp\myfile.MO')) {
    print 'Non valide à cause de MO au lieu de mo';
}
</pre>
        </div>
</div>
<br class="example-break">

        <div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
            <p>
                Notez que ce validateur ne vérifie que l'extension de fichier. Il ne vérifie
                pas le type <acronym class="acronym">MIME</acronym> réel du fichier.
            </p>
        </td></tr>
</table></div>
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.file.transfer.validators.filessize"></a>Validateur FilesSize</h3></div></div></div>
        

        <p>
            Le validateur <code class="code">FilesSize</code> vérifie le poids total de tous les fichiers
            transférés. Il supporte les options suivantes :
        </p>

        <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
                <p><code class="code">min</code> : paramètre le poids minimum de tous les fichiers.</p>

                <p>
                    Avec cette option vous pouvez définir le poids minimum de tous les
                    fichiers que vous souhaitez transférer.
                </p>
            </li>
<li class="listitem">
                <p><code class="code">max</code> : paramètre le poids maximum de tous les fichiers.</p>

                <p>
                    Avec cette option vous pouvez limiter le poids total des fichiers qui
                    doivent être transférés, mais pas la taille individuelle de chaque
                    fichier.
                </p>
            </li>
<li class="listitem">
                <p>
                    <code class="code">bytestring</code> : définit si un échec est retourné avec un taille
                    plus facilement lisible pour l'utilisateur, ou avec une taille de fichier
                    brute.
                </p>

                <p>
                    Avec cette option vous pouvez en fait définir si l'utilisateur récupérera
                    "10864" ou "10MB". La valeur par défaut est <code class="constant">TRUE</code> qui retournera
                    "10MB".
                </p>
            </li>
</ul></div>

        <p>
            Vous pouvez initialiser seulement avec une chaîne qui sera utilisée en tant que
            <code class="code">max</code>. Mais vous pouvez aussi utiliser les méthodes <code class="methodname">setMin()</code> et
            <code class="methodname">setMax()</code> pour paramétrer ces options plus tard et <code class="methodname">getMin()</code> et
            <code class="methodname">getMax()</code> pour les récupérer.
        </p>

        <p>
            La taille elle-même est acceptée en notation SI comme sur la plupart des systèmes
            d'exploitation. Au lieu de 20000 octets (NdT. : "bytes" en anglais), vous pouvez
            utiliser <span class="emphasis"><em>20kB</em></span>. Toutes les unités sont converties en utilisant 1024
            comme valeur de base. Les unités suivantes sont acceptées : <code class="code">kB</code>,
            <code class="code">MB</code>, <code class="code">GB</code>, <code class="code">TB</code>, <code class="code">PB</code> et <code class="code">EB</code>.
            Comme mentionné précédemment vous devez noter que 1kB équivaut à 1024 octets.
        </p>

        <div class="example">
<a name="zend.file.transfer.validators.filessize.example"></a><p class="title"><b>Exemple 414. Utiliser le validateur FilesSize</b></p>
<div class="example-contents">
            

            <pre class="programlisting">
$upload = new Zend_File_Transfer();

// Limite la taille de tous les fichiers à 40000 octets
$upload-&gt;addValidator('FilesSize', false, 40000);

// Limite la taille de tous les fichiers dans une plage de 10kB à 4MB
$upload-&gt;addValidator('FilesSize', false, array('min' =&gt; '10kB',
                                                'max' =&gt; '4MB'));

// Comme ci-dessus, mais retourne la taille de fichier brute plutôt qu'une chaîne
$upload-&gt;addValidator('FilesSize', false, array('min' =&gt; '10kB',
                                                'max' =&gt; '4MB',
                                                'bytestring' =&gt; false));
</pre>
        </div>
</div>
<br class="example-break">

        <div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
            <p>
                Notez que ce validateur stocke le poids des fichiers vérifiés en interne. Le
                fichier qui excédera le poids maximum sera retourné en tant qu'erreur.
            </p>
        </td></tr>
</table></div>
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.file.transfer.validators.imagesize"></a>Validateur ImageSize</h3></div></div></div>
        

        <p>
            Le validateur <code class="code">ImageSize</code> vérifie la taille des images. Il supporte les
            options suivantes :
        </p>

        <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
                <p><code class="code">minheight</code> : paramètre la hauteur minimum d'une image.</p>
            </li>
<li class="listitem">
                <p><code class="code">maxheight</code> : paramètre la hauteur maximum d'une image.</p>
            </li>
<li class="listitem">
                <p><code class="code">minwidth</code> : paramètre la largeur minimum d'une image.</p>
            </li>
<li class="listitem">
                <p><code class="code">maxwidth</code> : paramètre la largeur maximum d'une image.</p>
            </li>
</ul></div>

        <p>
            Vous pouvez aussi utiliser les méthodes <code class="methodname">setImageMin()</code> et
            <code class="methodname">setImageMax()</code> pour régler les valeurs minimum et maximum plus tard et
            <code class="methodname">getMin()</code> et <code class="methodname">getMax()</code> pour les récupérer.
        </p>

        <p>
            Par commodité, il existe aussi les méthodes <code class="code">setImageWidth</code> et
            <code class="code">setImageHeight</code> qui paramètrent la largeur et la hauteur minimum et maximum.
            Bien sûr les méthodes associées <code class="code">getImageWidth</code> et
            <code class="code">getImageHeight</code> sont aussi disponibles.
        </p>

        <p>
            Pour désactiver la validation d'une dimension, ne paramétrez pas l'option
            correspondante.
        </p>

        <div class="example">
<a name="zend.file.transfer.validators.imagesize.example"></a><p class="title"><b>Exemple 415. Utiliser le validateur ImageSize</b></p>
<div class="example-contents">
            

            <pre class="programlisting">
$upload = new Zend_File_Transfer();

// Limite la taille de l'image à une hauteur de 100 à 200 et
// une largeur de 40 à 80 pixels
$upload-&gt;addValidator('ImageSize',
                      false,
                      array('minwidth' =&gt; 40,
                            'maxwidth' =&gt; 80,
                            'minheight' =&gt; 100,
                            'maxheight' =&gt; 200);

// Autre possibilité de réglage
$upload-&gt;setImageWidth(array('minwidth' =&gt; 20, 'maxwidth' =&gt; 200));
</pre>
        </div>
</div>
<br class="example-break">
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.file.transfer.validators.iscompressed"></a>Validateur IsCompressed</h3></div></div></div>
        

        <p>
            Le validateur <code class="code">IsCompressed</code> vérifie si un fichier transféré est une
            archive compressée comme zip ou arc. Ce validateur est basée sur le validateur
            <code class="code">MimeType</code> et supportent les mêmes méthodes et options. Vous pouvez limiter
            ce validateur à des types de compression particuliers avec les méthodes décrites
            ci-dessous.
        </p>

        <div class="example">
<a name="zend.file.transfer.validators.iscompressed.example"></a><p class="title"><b>Exemple 416. Utiliser le validateur IsCompressed</b></p>
<div class="example-contents">
            

            <pre class="programlisting">
$upload = new Zend_File_Transfer();

// Vérifie si un fichier uploadé est une archive compressée
$upload-&gt;addValidator('IsCompressed', false);

// Limite ce validateur aux fichiers zip seulement
$upload-&gt;addValidator('IsCompressed', false, array('application/zip'));

// Limite ce validateur aux fichiers zip mais avec la notation simplifiée
$upload-&gt;addValidator('IsCompressed', false, 'zip');
</pre>
        </div>
</div>
<br class="example-break">

        <div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
            <p>
                Notez qu'il n'y a pas de vérification si vous paramétrez un type de fichier
                qui n'est pas un type de compression. Ainsi il est donc possible de définir que les
                fichiers gif sont acceptés par ce validateur même si ce n'est pas logique.
            </p>
        </td></tr>
</table></div>
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.file.transfer.validators.isimage"></a>Validateur IsImage</h3></div></div></div>
        

        <p>
            Le validateur <code class="code">IsImage</code> vérifie si un fichier transféré est une image
            comme gif ou jpeg. Ce validateur est basée sur le validateur <code class="code">MimeType</code> et
            supportent les mêmes méthodes et options. Vous pouvez limiter ce validateur à des types
            d'image particuliers avec les méthodes décrites ci-dessous.
        </p>

        <div class="example">
<a name="zend.file.transfer.validators.isimage.example"></a><p class="title"><b>Exemple 417. Utiliser le validateur IsImage</b></p>
<div class="example-contents">
            

            <pre class="programlisting">
$upload = new Zend_File_Transfer();

// Vérifie si un fichier uploadé est une image
$upload-&gt;addValidator('IsImage', false);

// Limite ce validateur aux fichiers gif seulement
$upload-&gt;addValidator('IsImage', false, array('application/gif'));

// Limite ce validateur aux fichiers jpeg mais avec la notation simplifiée
$upload-&gt;addValidator('IsImage', false, 'jpeg');
</pre>
        </div>
</div>
<br class="example-break">

        <div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
            <p>
                Notez qu'il n'y a pas de vérification si vous paramétrez un type de fichier
                qui n'est pas un type d'image. Ainsi il est donc possible de définir que les
                fichiers zip sont acceptés par ce validateur même si ce n'est pas logique.
            </p>
        </td></tr>
</table></div>
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.file.transfer.validators.hash"></a>Validateur Hash</h3></div></div></div>
        

        <p>
            Le validateur <code class="code">Hash</code> vérifie le contenu du fichier transféré en le
            hachant. Ce validateur utilise l'extension de hachage de <acronym class="acronym">PHP</acronym>. Il supporte les options
            suivantes :
        </p>

        <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
                <p>
                    <code class="code">*</code> : vous pouvez paramétrer n'importe quelle clé ou utiliser
                    un tableau numérique. Paramètre la valeur de hachage qui doit être
                    vérifié.
                </p>

                <p>
                    Vous pouvez paramétrer de multiples hachages en les fournissant sous la
                    forme d'un tableau. Chacun sera vérifié et seulement si tous échouent, la
                    validation elle-même échouera.
                </p>
            </li></ul></div>

        <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
                <p>
                    <code class="code">algorithm</code> : paramètre l'algorithme à utiliser pour hacher le
                    contenu.
                </p>

                <p>
                    Vous pouvez paramétrer de multiples algorithmes en utilisant la méthode
                    <code class="methodname">addHash()</code> plusieurs fois.
                </p>
            </li></ul></div>

        <div class="example">
<a name="zend.file.transfer.validators.hash.example"></a><p class="title"><b>Exemple 418. Utiliser le validateur Hash</b></p>
<div class="example-contents">
            

            <pre class="programlisting">
$upload = new Zend_File_Transfer();

// Vérifie si le contenu d'un fichier uploadé correspond au hachage fourni
$upload-&gt;addValidator('Hash', false, '3b3652f');

// Limite ce validateur à deux différents hachages
$upload-&gt;addValidator('Hash', false, array('3b3652f', 'e612b69'));

// Paramètre un algorithme différent pour effectuer le hachage
$upload-&gt;addValidator('Hash', false, array('315b3cd8273d44912a7', 'algorithm' =&gt; 'md5'));
</pre>
        </div>
</div>
<br class="example-break">

        <div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
            <p>
                Ce validateur supporte environ 34 algorithmes de hachage différents. Les plus
                connus sont "crc32", "md5" and "sha1". Si vous souhaitez connaître les autres
                algorithmes, voyez <a class="ulink" href="http://php.net/manual/fr/function.hash-algos.php" target="_top">la
                méthode hash_algos de <acronym class="acronym">PHP</acronym></a>.
            </p>
        </td></tr>
</table></div>
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.file.transfer.validators.md5"></a>Validateur Md5</h3></div></div></div>
        

        <p>
            Le validateur <code class="code">Md5</code> vérifie le contenu du fichier transféré en le
            hachant. Ce validateur utilise l'extension de hachage de <acronym class="acronym">PHP</acronym> avec l'algorithme md5. Il
            supporte les options suivantes :
        </p>

        <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
                <p>
                    <code class="code">*</code> : vous pouvez paramétrer n'importe quelle clé ou utiliser
                    un tableau numérique. Paramètre la valeur de hachage qui doit être
                    vérifié.
                </p>

                <p>
                    Vous pouvez paramétrer de multiples hachages en les fournissant sous la
                    forme d'un tableau. Chacun sera vérifié et seulement si tous échouent, la
                    validation elle-même échouera.
                </p>
            </li></ul></div>

        <div class="example">
<a name="zend.file.transfer.validators.md5.example"></a><p class="title"><b>Exemple 419. Utiliser le validateur Md5</b></p>
<div class="example-contents">
            

            <pre class="programlisting">
$upload = new Zend_File_Transfer();

// Vérifie si le contenu d'un fichier uploadé correspond au hachage fourni
$upload-&gt;addValidator('Md5', false, '3b3652f336522365223');

// Limite ce validateur à deux différents hachages
$upload-&gt;addValidator('Md5', false, array('3b3652f336522365223', 'eb3365f3365ddc65365'));
</pre>
        </div>
</div>
<br class="example-break">
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.file.transfer.validators.mimetype"></a>Validateur MimeType</h3></div></div></div>
        

        <p>
            Le validateur <code class="code">MimeType</code> vérifie le type <acronym class="acronym">MIME</acronym> des fichiers transférés.
            Il supporte les options suivantes :
        </p>

        <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
                <p>
                    <code class="code">*</code> : vous pouvez paramétrer n'importe quelle clé ou utiliser un
                    tableau numérique. Paramètre le type <acronym class="acronym">MIME</acronym> à contrôler.
                </p>

                <p>
                    Avec cette option vous pouvez définir le type <acronym class="acronym">MIME</acronym> des fichiers qui seront
                    acceptés.
                </p>
            </li>
<li class="listitem">
                <p>
                    <code class="code">headerCheck</code> : si spécifié à <code class="constant">TRUE</code>, cette
                    option va vérifier l'information <acronym class="acronym">HTTP</acronym> concernant le type de
                    fichier quand les extensions <span class="emphasis"><em>fileInfo</em></span> ou
                    <span class="emphasis"><em>mimeMagic</em></span> ne seront pas trouvées. La valeur par défaut de
                    cette option est <code class="constant">FALSE</code>.
                </p>
            </li>
<li class="listitem">
                <p><code class="code">magicfile</code> : le magicfile qui sera utilisé.</p>

                <p>
                    Avec cette option vous pouvez définir le magicfile à utiliser. Quand il
                    n'est pas utilisé ou vide, la constante <code class="constant">MAGIC</code> sera utilisée. Cette
                    option est disponible à partir de la version 1.7.1 de Zend Framework.
                </p>
            </li>
</ul></div>

        <p>
            Ce validateur accepte des types <acronym class="acronym">MIME</acronym> multiples soit sous la forme d'une chaîne
            utilisant le caractère virgule (",") comme séparateur ou sous la forme d'un tableau.
            Vous pouvez aussi utiliser les méthodes <code class="methodname">setMimeType()</code>,
            <code class="methodname">addMimeType()</code>, et <code class="methodname">getMimeType()</code> pour paramétrer et récupérer
            les types <acronym class="acronym">MIME</acronym>.
        </p>

        <p>
            Vous pouvez aussi paramétrer le magicfile qui sera utilisé par fileinfo avec
            l'option <code class="code">magicfile</code>. De plus il existe les méthodes
            <code class="methodname">setMagicFile()</code> et <code class="methodname">getMagicFile()</code> qui permettent de paramétrer
            ou récupérer plus tard le paramètre <code class="code">magicfile</code>. Ces méthodes sont
            disponibles à partir de la version Zend Framework 1.7.1.
        </p>

        <div class="example">
<a name="zend.file.transfer.validators.mimetype.example"></a><p class="title"><b>Exemple 420. Utiliser le validateur MimeType</b></p>
<div class="example-contents">
            

            <pre class="programlisting">
$upload = new Zend_File_Transfer();

// Limite le type MIME de tous les fichiers aux images gif
$upload-&gt;addValidator('MimeType', false, 'image/gif');

// Limite le type MIME de tous les fichiers aux images jpeg et gif
$upload-&gt;adValidator('MimeType', false, array('image/gif', 'image/jpeg');

// Limite le type MIME de tous les fichiers au groupe des images
$upload-&gt;addValidator('MimeType', false, 'image');

// Utilise un magicfile différent
$upload-&gt;addValidator('MimeType', false, array('image', 'magicfile' =&gt; '/path/to/magicfile.mgx'));
</pre>
        </div>
</div>
<br class="example-break">

        <p>
            L'exemple ci-dessus montre qu'il est aussi possible de limiter le type <acronym class="acronym">MIME</acronym>
            accepté à un groupe de type <acronym class="acronym">MIME</acronym>. Pour autoriser toutes les images utilisez simplement
            "image" en tant que type <acronym class="acronym">MIME</acronym>. Ceci peut être appliqué à tous les groupes de type <acronym class="acronym">MIME</acronym>
            comme "image", "audio", "video", "text" et plus encore.
        </p>

        <div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
            <p>
                Notez qu'autoriser un groupe de type <acronym class="acronym">MIME</acronym> acceptera tous les membres de ce
                groupe même si votre application ne les supporte pas. Par exemple quand vous
                autorisez "image", vous autorisez donc "image/xpixmap" ou "image/vasa", ce qui peut
                être problématique. Quand vous n'êtes pas sûr que votre application supporte tous
                les types, vous devriez définir individuellement les types <acronym class="acronym">MIME</acronym> plutôt que le groupe
                complet.
            </p>
        </td></tr>
</table></div>

        <div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
            <p>
                Ce composant utilise l'extension <code class="code">fileinfo</code> si elle est disponible.
                Si ce n'est pas le cas, il utilisera alors la fonction
                <code class="code">mime_content_type</code>. Et si l'appel de fonction échoue, il utilisera le
                type <acronym class="acronym">MIME</acronym> fourni par <acronym class="acronym">HTTP</acronym>.
            </p>

            <p>
                Vous devez cependant être averti de possibles problèmes de sécurité si, ni
                <code class="code">fileinfo</code>, ni <code class="code">mime_content_type</code> ne sont disponibles : le
                type <acronym class="acronym">MIME</acronym> fourni pas <acronym class="acronym">HTTP</acronym> n'étant pas sécurisé et pouvant être facilement
                manipulé.
            </p>
        </td></tr>
</table></div>
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.file.transfer.validators.notexists"></a>Validateur NotExists</h3></div></div></div>
        

        <p>
            Le validateur <code class="code">NotExists</code> l'existence des fichiers fournis. Il supporte
            les options suivantes :
        </p>

        <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
                <p>
                    <code class="code">*</code> : vous pouvez paramétrer n'importe quelle clé ou utiliser
                    un tableau numérique. Vérifie si le fichier n'existe pas dans le dossier
                    fourni.
                </p>
            </li></ul></div>

        <p>
            Ce validateur accepte des extensions multiples soit sous la forme d'une chaîne
            utilisant le caractère virgule (",") comme séparateur ou sous la forme d'un tableau.
            Vous pouvez aussi utiliser les méthodes <code class="methodname">setDirectory()</code>,
            <code class="methodname">addDirectory()</code>, et <code class="methodname">getDirectory()</code> pour paramétrer et récupérer
            les extensions.
        </p>

        <div class="example">
<a name="zend.file.transfer.validators.notexists.example"></a><p class="title"><b>Exemple 421. Utiliser le validateur NotExists</b></p>
<div class="example-contents">
            

            <pre class="programlisting">
$upload = new Zend_File_Transfer();

// Ajoute le dossier temporaire à vérifier
$upload-&gt;addValidator('NotExists', false, '\temp');

// Ajoute deux dossiers en utilisant la notation de type tableau
$upload-&gt;addValidator('NotExists',
                      false,
                      array('\home\images',
                            '\home\uploads'));
</pre>
        </div>
</div>
<br class="example-break">

        <div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
            <p>
                Notez que ce validateur vérifie si le fichier n'existe dans aucun des dossiers
                fournis. La validation échoue si le fichier existe dans l'un des dossiers.
            </p>
        </td></tr>
</table></div>
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.file.transfer.validators.sha1"></a>Validateur Sha1</h3></div></div></div>
        

        <p>
            Le validateur <code class="code">Sha1</code> vérifie le contenu du fichier transféré en le
            hachant. Ce validateur utilise l'extension de hachage de <acronym class="acronym">PHP</acronym> avec l'algorithme sha1. Il
            supporte les options suivantes :
        </p>

        <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
                <p>
                    <code class="code">*</code> : vous pouvez paramétrer n'importe quelle clé ou utiliser
                    un tableau numérique. Paramètre la valeur de hachage qui doit être
                    vérifié.
                </p>

                <p>
                    Vous pouvez paramétrer de multiples hachages en les fournissant sous la
                    forme d'un tableau. Chacun sera vérifié et seulement si tous échouent, la
                    validation elle-même échouera.
                </p>
            </li></ul></div>

        <div class="example">
<a name="zend.file.transfer.validators.sha1.example"></a><p class="title"><b>Exemple 422. Utiliser le validateur Sha1</b></p>
<div class="example-contents">
            

            <pre class="programlisting">
$upload = new Zend_File_Transfer();

// Vérifie si le contenu d'un fichier uploadé correspond au hachage fourni
$upload-&gt;addValidator('Sha1', false, '3b3652f336522365223');

// Limite ce validateur à deux différents hachages
$upload-&gt;addValidator('Sha1', false, array('3b3652f336522365223', 'eb3365f3365ddc65365'));
</pre>
        </div>
</div>
<br class="example-break">
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.file.transfer.validators.size"></a>Validateur Size</h3></div></div></div>
        

        <p>
            Le validateur <code class="code">Size</code> vérifie le poids d'un fichier unique. Il supporte
            les options suivantes :
        </p>

        <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
                <p><code class="code">min</code> : paramètre le poids minimum du fichier.</p>
            </li>
<li class="listitem">
                <p><code class="code">max</code> : paramètre le poids maximum du fichier.</p>
            </li>
<li class="listitem">
                <p>
                    <code class="code">bytestring</code> : définit si un échec est retourné avec un taille
                    plus facilement lisible pour l'utilisateur, ou avec une taille de fichier
                    brute.
                </p>

                <p>
                    Avec cette option vous pouvez en fait définir si l'utilisateur récupérera
                    "10864" ou "10MB". La valeur par défaut est <code class="constant">TRUE</code> qui retournera
                    "10MB".
                </p>
            </li>
</ul></div>

        <p>
            Vous pouvez initialiser seulement avec une chaîne qui sera utilisée en tant que
            <code class="code">max</code>. Mais vous pouvez aussi utiliser les méthodes <code class="methodname">setMin()</code> et
            <code class="methodname">setMax()</code> pour paramétrer ces options plus tard et <code class="methodname">getMin()</code> et
            <code class="methodname">getMax()</code> pour les récupérer.
        </p>

        <p>
            Quand seule une chaîne est fournie, elle est utilisée en tant que
            <code class="code">max</code>. Mais vous pouvez aussi utiliser les méthodes <code class="methodname">setMin()</code> et
            <code class="methodname">setMax()</code> pour paramétrer ces options plus tard et <code class="methodname">getMin()</code> et
            <code class="methodname">getMax()</code> pour les récupérer.
        </p>

        <p>
            La taille elle-même est acceptée en notation SI comme sur la plupart des systèmes
            d'exploitation. Au lieu de 20000 octets, vous pouvez utiliser <span class="emphasis"><em>20kB</em></span>.
            Toutes les unités sont converties en utilisant 1024 comme valeur de base. Les unités
            suivantes sont acceptées : <code class="code">kB</code>, <code class="code">MB</code>, <code class="code">GB</code>,
            <code class="code">TB</code>, <code class="code">PB</code> et <code class="code">EB</code>. Comme mentionné précédemment vous
            devez noter que 1kB équivaut à 1024 octets.
        </p>

        <div class="example">
<a name="zend.file.transfer.validators.size.example"></a><p class="title"><b>Exemple 423. Utiliser le validateur Size</b></p>
<div class="example-contents">
            

            <pre class="programlisting">
$upload = new Zend_File_Transfer();

// Limite la taille d'un fichier à 40000 octets
$upload-&gt;addValidator('Size', false, 40000);

// Limite la taille du fichier 'uploadfile' dans une plage de 10kB à 4MB
// Additionally returns the plain number in case of an error instead of a userfriendly one
$upload-&gt;addValidator('Size', false, array('min' =&gt; '10kB',
                                           'max' =&gt; '4MB',
                                           'bytestring' =&gt; false));
</pre>
        </div>
</div>
<br class="example-break">
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.file.transfer.validators.wordcount"></a>Validateur WordCount</h3></div></div></div>
        

        <p>
            Le validateur <code class="code">WordCount</code> vérifie le nombre de mots à l'intérieur des
            fichiers fournis. Il supporte les options suivantes :
        </p>

        <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
                <p>
                    <code class="code">min</code> : spécifie le nombre de mots minimum qui doivent être
                    trouvés.
                </p>
            </li>
<li class="listitem">
                <p>
                    <code class="code">max</code> : spécifie le nombre de mots maximum qui doivent être
                    trouvés.
                </p>
            </li>
</ul></div>

        <p>
            Si vous initialisez ce validateur avec une chaîne ou un entier, la valeur sera
            utilisée en tant que <code class="code">max</code>. Mais vous pouvez aussi utiliser les méthodes
            <code class="methodname">setMin()</code> et <code class="methodname">setMax()</code> pour paramétrer ces options plus tard et
            <code class="methodname">getMin()</code> et <code class="methodname">getMax()</code> pour les récupérer.
        </p>

        <div class="example">
<a name="zend.file.transfer.validators.wordcount.example"></a><p class="title"><b>Exemple 424. Utiliser le validateur WordCount</b></p>
<div class="example-contents">
            

            <pre class="programlisting">
$upload = new Zend_File_Transfer();

// Limite le nombre maximum de mots dans les fichiers à 2000
$upload-&gt;addValidator('WordCount', false, 2000);

// Limite le nombre de mots dans les fichiers entre un minimum de 1000
// et un maximum de 5000 mots
$upload-&gt;addValidator('WordCount', false, array('min' =&gt; 1000, 'max' =&gt; 5000));
</pre>
        </div>
</div>
<br class="example-break">
    </div>
</div>
<div class="navfooter"><table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="zend.file.transfer.introduction.html">Précédent</a> </td>
<td width="20%" align="center"><a accesskey="u" href="zend.file.html">Niveau supérieur</a></td>
<td width="40%" align="right"> <a accesskey="n" href="zend.file.transfer.filters.html">Suivant</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">Zend_File_Transfer </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">Sommaire</a></td>
<td width="40%" align="right" valign="top"> Filtres pour Zend_File_Transfer</td>
</tr>
</table></div>
<div class="revinfo"></div>
</body>
</html>
