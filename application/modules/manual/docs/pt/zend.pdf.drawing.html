<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Desenhando</title>
<link rel="stylesheet" type="text/css" href="dbstyle.css">
<meta name="generator" content="DocBook XSL Stylesheets V1.79.2">
<link rel="home" href="index.html" title="Guia de Referência do Programador">
<link rel="up" href="zend.pdf.html" title="Zend_Pdf">
<link rel="prev" href="zend.pdf.pages.html" title="Trabalhando com Páginas">
<link rel="next" href="zend.pdf.interactive-features.html" title="Interactive Features">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader"><table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">Desenhando</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="zend.pdf.pages.html">Anterior</a> </td>
<th width="60%" align="center">Zend_Pdf</th>
<td width="20%" align="right"> <a accesskey="n" href="zend.pdf.interactive-features.html">Próxima</a>
</td>
</tr>
</table></div>
<div class="sect1">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="zend.pdf.drawing"></a>Desenhando</h2></div></div></div>
    

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.geometry"></a>Geometria</h3></div></div></div>
        

        <p>
            O <acronym class="acronym">PDF</acronym> usa a mesma geometria do PostScript. A geometria começa no
            canto inferior esquerdo da página e, por padrão, é medida em pontos (1/72 de polegada).
        </p>

        <p>
            O tamanho da página pode ser recuperado de um objeto página:
        </p>

        <pre class="programlisting">
$width  = $pdfPage-&gt;getWidth();
$height = $pdfPage-&gt;getHeight();
</pre>
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.color"></a>Cores</h3></div></div></div>
        

        <p>
            O <acronym class="acronym">PDF</acronym> possui uma poderosa capacidade para a representação de cores.
            O módulo <code class="classname">Zend_Pdf</code> dá suporte à Escala de Cinza, RGB e CMYK.
            Qualquer um deles pode ser usado em qualquer lugar onde um
            <code class="classname">Zend_Pdf_Color</code> for requisitado. As classes
            <code class="classname">Zend_Pdf_Color_GrayScale</code>,
            <code class="classname">Zend_Pdf_Color_Rgb</code> e <code class="classname">Zend_Pdf_Color_Cmyk</code>
            fornecem a seguinte funcionalidade:
        </p>

        <pre class="programlisting">
// $grayLevel (float number). 0.0 (black) - 1.0 (white)
$color1 = new Zend_Pdf_Color_GrayScale($grayLevel);

// $r, $g, $b (float numbers). 0.0 (min intensity) - 1.0 (max intensity)
$color2 = new Zend_Pdf_Color_Rgb($r, $g, $b);

// $c, $m, $y, $k (float numbers). 0.0 (min intensity) - 1.0 (max intensity)
$color3 = new Zend_Pdf_Color_Cmyk($c, $m, $y, $k);
</pre>

        <p>
            O estilo de cores do <acronym class="acronym">HTML</acronym> também é fornecido na classe
            <code class="classname">Zend_Pdf_Color_Html</code>:
        </p>

        <pre class="programlisting">
$color1 = new Zend_Pdf_Color_Html('#3366FF');
$color2 = new Zend_Pdf_Color_Html('silver');
$color3 = new Zend_Pdf_Color_Html('forestgreen');
</pre>
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.shape-drawing"></a>Desenhando Formas</h3></div></div></div>
        

        <p>
            Todas as operações de desenho podem ser feitas no contexto de uma página
            <acronym class="acronym">PDF</acronym>.
        </p>

        <p>
            A classe <code class="classname">Zend_Pdf_Page</code> provê um conjunto de formas básicas para
            desenho:
        </p>

        <pre class="programlisting">
/**
 * Desenha uma linha de x1,y1 até x2,y2.
 *
 * @param float $x1
 * @param float $y1
 * @param float $x2
 * @param float $y2
 * @return Zend_Pdf_Page
 */
public function drawLine($x1, $y1, $x2, $y2);
</pre>

        <pre class="programlisting">
/**
 * Desenha um retângulo.
 *
 * Tipos de preenchimento:
 * Zend_Pdf_Page::SHAPE_DRAW_FILL_AND_STROKE - preenche o retângulo
 *                                             e o traço (padrão)
 * Zend_Pdf_Page::SHAPE_DRAW_STROKE          - traço do retângulo
 * Zend_Pdf_Page::SHAPE_DRAW_FILL            - preenche o retângulo
 *
 * @param float $x1
 * @param float $y1
 * @param float $x2
 * @param float $y2
 * @param integer $fillType
 * @return Zend_Pdf_Page
 */
public function drawRectangle($x1, $y1, $x2, $y2,
                    $fillType = Zend_Pdf_Page::SHAPE_DRAW_FILL_AND_STROKE);
</pre>

        <pre class="programlisting">
/**
 * Desenha um retângulo arredondado.
 *
 * Tipos de preenchimento:
 * Zend_Pdf_Page::SHAPE_DRAW_FILL_AND_STROKE - preenche o retângulo
 *                                             e o traço (padrão)
 * Zend_Pdf_Page::SHAPE_DRAW_STROKE          - traço do retângulo
 * Zend_Pdf_Page::SHAPE_DRAW_FILL            - preenche o retângulo
 *
 * radius é um inteiro que representa o raio dos quatro cantos, ou uma matriz
 * de quatro números inteiros que representam o raio a partir do superior
 * esquerdo, indo no sentido horário
 *
 * @param float $x1
 * @param float $y1
 * @param float $x2
 * @param float $y2
 * @param integer|array $radius
 * @param integer $fillType
 * @return Zend_Pdf_Page
 */
public function drawRoundedRectangle($x1, $y1, $x2, $y2, $radius,
                       $fillType = Zend_Pdf_Page::SHAPE_DRAW_FILL_AND_STROKE);
</pre>

        <pre class="programlisting">
/**
 * Desenha um polígono.
 *
 * If $fillType is Zend_Pdf_Page::SHAPE_DRAW_FILL_AND_STROKE or
 * Zend_Pdf_Page::SHAPE_DRAW_FILL, then polygon is automatically closed.
 * See detailed description of these methods in a PDF documentation
 * (section 4.4.2 Path painting Operators, Filling)
 *
 * @param array $x  - array of float (the X co-ordinates of the vertices)
 * @param array $y  - array of float (the Y co-ordinates of the vertices)
 * @param integer $fillType
 * @param integer $fillMethod
 * @return Zend_Pdf_Page
 */
public function drawPolygon($x, $y,
                            $fillType =
                                Zend_Pdf_Page::SHAPE_DRAW_FILL_AND_STROKE,
                            $fillMethod =
                                Zend_Pdf_Page::FILL_METHOD_NON_ZERO_WINDING);
</pre>

        <pre class="programlisting">
/**
 * Draw a circle centered on x, y with a radius of radius.
 *
 * Angles are specified in radians
 *
 * Method signatures:
 * drawCircle($x, $y, $radius);
 * drawCircle($x, $y, $radius, $fillType);
 * drawCircle($x, $y, $radius, $startAngle, $endAngle);
 * drawCircle($x, $y, $radius, $startAngle, $endAngle, $fillType);
 *
 *
 * It's not a really circle, because PDF supports only cubic Bezier
 * curves. But very good approximation.
 * It differs from a real circle on a maximum 0.00026 radiuses (at PI/8,
 * 3*PI/8, 5*PI/8, 7*PI/8, 9*PI/8, 11*PI/8, 13*PI/8 and 15*PI/8 angles).
 * At 0, PI/4, PI/2, 3*PI/4, PI, 5*PI/4, 3*PI/2 and 7*PI/4 it's exactly
 * a tangent to a circle.
 *
 * @param float $x
 * @param float $y
 * @param float $radius
 * @param mixed $param4
 * @param mixed $param5
 * @param mixed $param6
 * @return Zend_Pdf_Page
 */
public function  drawCircle($x,
                            $y,
                            $radius,
                            $param4 = null,
                            $param5 = null,
                            $param6 = null);
</pre>

        <pre class="programlisting">
/**
 * Draw an ellipse inside the specified rectangle.
 *
 * Method signatures:
 * drawEllipse($x1, $y1, $x2, $y2);
 * drawEllipse($x1, $y1, $x2, $y2, $fillType);
 * drawEllipse($x1, $y1, $x2, $y2, $startAngle, $endAngle);
 * drawEllipse($x1, $y1, $x2, $y2, $startAngle, $endAngle, $fillType);
 *
 * Angles are specified in radians
 *
 * @param float $x1
 * @param float $y1
 * @param float $x2
 * @param float $y2
 * @param mixed $param5
 * @param mixed $param6
 * @param mixed $param7
 * @return Zend_Pdf_Page
 */
public function drawEllipse($x1,
                            $y1,
                            $x2,
                            $y2,
                            $param5 = null,
                            $param6 = null,
                            $param7 = null);
</pre>
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.text-drawing"></a>Desenhando Texto</h3></div></div></div>
        

        <p>
            As operações de desenho de texto também existem no contexto de uma página
            <acronym class="acronym">PDF</acronym>. Você pode desenhar uma linha de texto em qualquer posição da
            página ao fornecer as coordenadas x e y. A fonte, tamanho da fonte e a cor de
            preenchimento de página atuais são usadas para a operação de desenho de texto (veja a
            descrição detalhada abaixo).
        </p>

        <pre class="programlisting">
/**
 * Draw a line of text at the specified position.
 *
 * @param string $text
 * @param float $x
 * @param float $y
 * @param string $charEncoding (optional) Character encoding of source
 *               text.Defaults to current locale.
 * @throws Zend_Pdf_Exception
 * @return Zend_Pdf_Page
 */
public function drawText($text, $x, $y, $charEncoding = '');
</pre>

        <div class="example">
<a name="zend.pdf.drawing.text-drawing.example-1"></a><p class="title"><b>Exemplo 645. Desenha uma string na página</b></p>
<div class="example-contents">
            

            <pre class="programlisting">
...
$pdfPage-&gt;drawText('Olá mundo!', 72, 720);
...
</pre>
        </div>
</div>
<br class="example-break">

        <div class="example">
<a name="zend.pdf.drawing.text-drawing.example-2"></a><p class="title"><b>Exemplo 646. Define a cor da fonte</b></p>
<div class="example-contents">
            

            <pre class="programlisting">
...
$pdfPage-&gt;setFillColor(Zend_Pdf_Color_Html::color('#990000'))
        -&gt;drawText('Hello world (in red)!', 72, 720);
....
</pre>
        </div>
</div>
<br class="example-break">

        <p>
            Por padrão, as strings de texto são interpretadas usando o método de decodificação e
            caracteres local. Se você tiver uma string que use um método de codificação diferente
            (como uma string UTF-8 sendo lida de um arquivo no disco, ou uma string MacRoman obtida
            de um bando de dados legado), você pode a codificação na hora de desenhar e a
            <code class="classname">Zend_Pdf</code> irá tratar a comunicação para você. Você pode fornecer
            as strings em qualquer método de codificação suportada pela função <a class="ulink" href="http://www.php.net/manual/function.iconv.php" target="_top">iconv()</a> do
            <acronym class="acronym">PHP</acronym>:
        </p>

        <div class="example">
<a name="zend.pdf.drawing.text-drawing.example-3"></a><p class="title"><b>Exemplo 647. Desenha uma string codificada em UTF-8 em uma página</b></p>
<div class="example-contents">
            

            <pre class="programlisting">
...
// Read a UTF-8-encoded string from disk
$unicodeString = fread($fp, 1024);

// Draw the string on the page
$pdfPage-&gt;drawText($unicodeString, 72, 720, 'UTF-8');
...
</pre>
        </div>
</div>
<br class="example-break">
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.using-fonts"></a>Usando fontes</h3></div></div></div>
        

        <p>
            O método <code class="methodname">Zend_Pdf_Page::drawText()</code> usa a fonte atual da página,
            que é configurada através do método <code class="methodname">Zend_Pdf_Page::setFont()</code>:
        </p>

        <pre class="programlisting">
/**
 * Set current font.
 *
 * @param Zend_Pdf_Resource_Font $font
 * @param float $fontSize
 * @return Zend_Pdf_Page
 */
public function setFont(Zend_Pdf_Resource_Font $font, $fontSize);
</pre>

        <p>
            Documentos <acronym class="acronym">PDF</acronym> suportam as fontes PostScript Type 1 e TrueType, assim
            como dois tipos especiais do <acronym class="acronym">PDF</acronym>, o Type 3 e as fontes compostas.
            Existem também 14 fontes padrão Type 1 inclusas em todos os visualizadores de
            <acronym class="acronym">PDF</acronym>: Courier (4 estilos), Helvetica (4 estilos), Times (4 estilos),
            Symbol, e Zapf Dingbats.
        </p>

        <p>
            <code class="classname">Zend_Pdf</code> atualmente dá suporte às 14 fontes
            <acronym class="acronym">PDF</acronym> padrão, assim como às suas fontes personalizadas TrueType.
            Objetos do tipo Font são obtidos via um dos dois métodos fábrica:
            <code class="methodname">Zend_Pdf_Font::fontWithName($fontName)</code> para as 14 fontes padrão
            do <acronym class="acronym">PDF</acronym> ou
            <code class="methodname">Zend_Pdf_Font::fontWithPath($filePath)</code> para fontes
            personalizadas.
        </p>

        <div class="example">
<a name="zend.pdf.drawing.using-fonts.example-1"></a><p class="title"><b>Exemplo 648. Criar uma fonte padrão</b></p>
<div class="example-contents">
            

            <pre class="programlisting">
...
// Create new font
$font = Zend_Pdf_Font::fontWithName(Zend_Pdf_Font::FONT_HELVETICA);

// Apply font
$pdfPage-&gt;setFont($font, 36);
...
</pre>
        </div>
</div>
<br class="example-break">

        <p>
            As constantes para as 14 fontes <acronym class="acronym">PDF</acronym> padrão são definidas na classe
            <code class="classname">Zend_Pdf_Font</code>:

            </p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem"><p>Zend_Pdf_Font::FONT_COURIER</p></li>
<li class="listitem"><p>Zend_Pdf_Font::FONT_COURIER_BOLD</p></li>
<li class="listitem"><p>Zend_Pdf_Font::FONT_COURIER_ITALIC</p></li>
<li class="listitem"><p>Zend_Pdf_Font::FONT_COURIER_BOLD_ITALIC</p></li>
<li class="listitem"><p>Zend_Pdf_Font::FONT_TIMES</p></li>
<li class="listitem"><p>Zend_Pdf_Font::FONT_TIMES_BOLD</p></li>
<li class="listitem"><p>Zend_Pdf_Font::FONT_TIMES_ITALIC</p></li>
<li class="listitem"><p>Zend_Pdf_Font::FONT_TIMES_BOLD_ITALIC</p></li>
<li class="listitem"><p>Zend_Pdf_Font::FONT_HELVETICA</p></li>
<li class="listitem"><p>Zend_Pdf_Font::FONT_HELVETICA_BOLD</p></li>
<li class="listitem"><p>Zend_Pdf_Font::FONT_HELVETICA_ITALIC</p></li>
<li class="listitem"><p>Zend_Pdf_Font::FONT_HELVETICA_BOLD_ITALIC</p></li>
<li class="listitem"><p>Zend_Pdf_Font::FONT_SYMBOL</p></li>
<li class="listitem"><p>Zend_Pdf_Font::FONT_ZAPFDINGBATS</p></li>
</ul></div>
<p>
        </p>

        <p>
            Você também pode usar qualquer fonte individual TrueType (que normalmente possui a
            extensão '.ttf') ou uma fonte OpenType (de extensão '.otf') se ela contiver o mesmo
            contorno das TrueType. Atualmente sem suporte, mas planejadas para um lançamento futuro
            são os arquivos .dfont do Mac OS X e os arquivos Microsoft TrueType Collection (extensão
            '.ttc').
        </p>

        <p>
            Para usar uma fonte TrueType, você deve fornecer o caminho completo para a fonte. Se a
            fonte não puder ser lida por algum motivo, ou se ela não for uma fonte TrueType, o
            método fábrica irá lançar uma exceção:
        </p>

        <div class="example">
<a name="zend.pdf.drawing.using-fonts.example-2"></a><p class="title"><b>Exemplo 649. Criar uma fonte TrueType</b></p>
<div class="example-contents">
            

            <pre class="programlisting">
...
// Create new font
$goodDogCoolFont = Zend_Pdf_Font::fontWithPath('/path/to/GOODDC__.TTF');

// Apply font
$pdfPage-&gt;setFont($goodDogCoolFont, 36);
...
</pre>
        </div>
</div>
<br class="example-break">

        <p>
            Por padrão, fontes personalizadas serão embarcadas no documento <acronym class="acronym">PDF</acronym>
            resultante. Isso permite que as pessoas que receberem o arquivo poderão visualizá-lo
            corretamente, mesmo que não possuam as fontes apropriadas instaladas em seus sistemas.
            Se você estiver preocupado com o tamanho do arquivo você pode solicitar que a fonte não
            seja incluída através de uma opção 'não embarque' do método fábrica:
        </p>

        <div class="example">
<a name="zend.pdf.drawing.using-fonts.example-3"></a><p class="title"><b>Exemplo 650. Criar uma fonte TrueType, mas não embarcá-la no documento PDF</b></p>
<div class="example-contents">
            

            <pre class="programlisting">
...
// Create new font
$goodDogCoolFont = Zend_Pdf_Font::fontWithPath('/path/to/GOODDC__.TTF',
                                               Zend_Pdf_Font::EMBED_DONT_EMBED);

// Apply font
$pdfPage-&gt;setFont($goodDogCoolFont, 36);
...
</pre>
        </div>
</div>
<br class="example-break">

        <p>
            Se o programa da fonte não for embarcado, mas o recebedor do arquivo
            <acronym class="acronym">PDF</acronym> tiver a fonte instalada em seu sistema ele irá ver o documento
            corretamente. Caso ele não possua a fonte correta instalada, o visualizador
            <acronym class="acronym">PDF</acronym> fará o melhor para sintetizar uma substituição.
        </p>

        <p>
            Algumas fontes possuem regras de licença específicas que evitam que elas sejam
            embarcadas em documentos <acronym class="acronym">PDF</acronym>. Então, para que você não seja pego de
            surpresa por isso, se você tentar usar uma fonte que não pode ser embarcada, o método
            fábrica irá lançar uma exceção.
        </p>

        <p>
            Você ainda pode usar estas fontes, mas deve passar a opção 'não embarque' como foi
            descrito acima, ou então você pode simplesmente suprimir a exceção:
        </p>

        <div class="example">
<a name="zend.pdf.drawing.using-fonts.example-4"></a><p class="title"><b>Exemplo 651. Não lançar uma exceção para fontes que não podem ser embarcadas</b></p>
<div class="example-contents">
            

            <pre class="programlisting">
...
$font = Zend_Pdf_Font::fontWithPath(
           '/path/to/unEmbeddableFont.ttf',
           Zend_Pdf_Font::EMBED_SUPPRESS_EMBED_EXCEPTION
        );
...
</pre>
        </div>
</div>
<br class="example-break">

        <p>
            Esta técnica de supressão é preferível se você permitir que o usuário final escolha sua
            própria fonte. Fontes que podem ser embarcadas no documento <acronym class="acronym">PDF</acronym> vão
            ser; aquelas que não puderem, não serão.
        </p>

        <p>
            Programas de fonte podem ser um tanto grandes, alguns alcançam dezenas de megabytes. Por
            padrão, todas as fontes embarcadas são comprimidas usando o esquema de compressão Flate,
            resultando, em média, em uma economia de espaço de 50%. Se, por alguma razão, você não
            quer comprimir o programa da fonte, você pode desabilitar isso através de uma opção:
        </p>

        <div class="example">
<a name="zend.pdf.drawing.using-fonts.example-5"></a><p class="title"><b>Exemplo 652. Não comprimir uma fonte embarcada</b></p>
<div class="example-contents">
            

            <pre class="programlisting">
...
$font = Zend_Pdf_Font::fontWithPath('/path/to/someReallyBigFont.ttf',
                                    Zend_Pdf_Font::EMBED_DONT_COMPRESS);
...
</pre>
        </div>
</div>
<br class="example-break">

        <p>
            Finalmente, quando necessário, você pode combinar as opções de embarque usando o
            operador binário OR:
        </p>

        <div class="example">
<a name="zend.pdf.drawing.using-fonts.example-6"></a><p class="title"><b>Exemplo 653. Combinando opções de embarque de fonte</b></p>
<div class="example-contents">
            

            <pre class="programlisting">
...
$font = Zend_Pdf_Font::fontWithPath(
            $someUserSelectedFontPath,
            (Zend_Pdf_Font::EMBED_SUPPRESS_EMBED_EXCEPTION |
            Zend_Pdf_Font::EMBED_DONT_COMPRESS));
...
</pre>
        </div>
</div>
<br class="example-break">
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.standard-fonts-limitations"></a>Standard PDF fonts limitations</h3></div></div></div>
        

        <p>
            Standard <acronym class="acronym">PDF</acronym> fonts use several single byte encodings internally
            (see <a class="ulink" href="http://www.adobe.com/devnet/acrobat/pdfs/pdf_reference_1-7.pdf" target="_top">PDF
                Reference, Sixth Edition, version 1.7</a> Appendix D for details). They are
            generally equal to Latin1 character set (except Symbol and ZapfDingbats fonts).
        </p>

        <p>
            <code class="classname">Zend_Pdf</code> uses CP1252 (WinLatin1) for drawing text with standard
            fonts.
        </p>

        <p>
            Text still can be provided in any other encoding, which must be specified if it differs
            from a current locale. Only WinLatin1 characters will be actually drawn.
        </p>

        <div class="example">
<a name="zend.pdf.drawing.using-fonts.example-7"></a><p class="title"><b>Exemplo 654. Combining font embedding options</b></p>
<div class="example-contents">
            

            <pre class="programlisting">
...
$font = Zend_Pdf_Font::fontWithName(Zend_Pdf_Font::FONT_COURIER);
$pdfPage-&gt;setFont($font, 36)
        -&gt;drawText('Euro sign - €', 72, 720, 'UTF-8')
        -&gt;drawText('Text with umlauts - à è ì', 72, 650, 'UTF-8');
...
</pre>
        </div>
</div>
<br class="example-break">
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.extracting-fonts"></a>Extracting fonts</h3></div></div></div>
        

        <p>
            <code class="classname">Zend_Pdf</code> module provides a possibility to extract fonts from
            loaded documents.
        </p>

        <p>
            It may be useful for incremental document updates. Without this functionality you have
            to attach and possibly embed font into a document each time you want to update it.
        </p>

        <p>
            <code class="classname">Zend_Pdf</code> and <code class="classname">Zend_Pdf_Page</code> objects provide
            special methods to extract all fonts mentioned within a document or a page:
        </p>

        <div class="example">
<a name="zend.pdf.drawing.extracting-fonts.example-1"></a><p class="title"><b>Exemplo 655. Extracting fonts from a loaded document</b></p>
<div class="example-contents">
            

            <pre class="programlisting">
...
$pdf = Zend_Pdf::load($documentPath);
...
// Get all document fonts
$fontList = $pdf-&gt;extractFonts();
$pdf-&gt;pages[] = ($page = $pdf-&gt;newPage(Zend_Pdf_Page::SIZE_A4));
$yPosition = 700;
foreach ($fontList as $font) {
    $page-&gt;setFont($font, 15);
    $fontName = $font-&gt;getFontName(Zend_Pdf_Font::NAME_POSTSCRIPT,
                                   'en',
                                   'UTF-8');
    $page-&gt;drawText($fontName . ': The quick brown fox jumps over the lazy dog',
                    100,
                    $yPosition,
                    'UTF-8');
    $yPosition -= 30;
}
...
// Get fonts referenced within the first document page
$firstPage = reset($pdf-&gt;pages);
$firstPageFonts = $firstPage-&gt;extractFonts();
...
</pre>
        </div>
</div>
<br class="example-break">

        <div class="example">
<a name="zend.pdf.drawing.extracting-fonts.example-2"></a><p class="title"><b>Exemplo 656. Extracting font from a loaded document by specifying font name</b></p>
<div class="example-contents">
            

            <pre class="programlisting">
...
$pdf = new Zend_Pdf();
...
$pdf-&gt;pages[] = ($page = $pdf-&gt;newPage(Zend_Pdf_Page::SIZE_A4));

$font = Zend_Pdf_Font::fontWithPath($fontPath);
$page-&gt;setFont($font, $fontSize);
$page-&gt;drawText($text, $x, $y);
...
// This font name should be stored somewhere...
$fontName = $font-&gt;getFontName(Zend_Pdf_Font::NAME_POSTSCRIPT,
                               'en',
                               'UTF-8');
...
$pdf-&gt;save($docPath);
...
</pre>

            <pre class="programlisting">
...
$pdf = Zend_Pdf::load($docPath);
...
$pdf-&gt;pages[] = ($page = $pdf-&gt;newPage(Zend_Pdf_Page::SIZE_A4));

/* $srcPage-&gt;extractFont($fontName) can also be used here */
$font = $pdf-&gt;extractFont($fontName);

$page-&gt;setFont($font, $fontSize);
$page-&gt;drawText($text, $x, $y);
...
$pdf-&gt;save($docPath, true /* incremental update mode */);
...
</pre>
        </div>
</div>
<br class="example-break">

        <p>
            Extracted fonts can be used in the place of any other font with the following
            limitations:

            </p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
                    <p>
                        Extracted font can be used only in the context of the document from which it
                        was extracted.
                    </p>
                </li>
<li class="listitem">
                    <p>
                        Possibly embedded font program is actually not extracted. So extracted font
                        can't provide correct font metrics and original font has to be used for text
                        width calculations:
                    </p>

                    <pre class="programlisting">
...
$font = $pdf-&gt;extractFont($fontName);
$originalFont = Zend_Pdf_Font::fontWithPath($fontPath);

$page-&gt;setFont($font /* use extracted font for drawing */, $fontSize);
$xPosition = $x;
for ($charIndex = 0; $charIndex &lt; strlen($text); $charIndex++) {
    $page-&gt;drawText($text[$charIndex], xPosition, $y);

    // Use original font for text width calculation
    $width = $originalFont-&gt;widthForGlyph(
                 $originalFont-&gt;glyphNumberForCharacter($text[$charIndex])
             );
    $xPosition += $width/$originalFont-&gt;getUnitsPerEm()*$fontSize;
}
...
</pre>
                </li>
</ul></div>
<p>
        </p>
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.image-drawing"></a>Desenhando Imagens</h3></div></div></div>
        

        <p>
            A classe <code class="classname">Zend_Pdf_Page</code> fornece o método drawImage() para o
            desenho de imagens:
        </p>

        <pre class="programlisting">
/**
 * Draw an image at the specified position on the page.
 *
 * @param Zend_Pdf_Resource_Image $image
 * @param float $x1
 * @param float $y1
 * @param float $x2
 * @param float $y2
 * @return Zend_Pdf_Page
 */
public function drawImage(Zend_Pdf_Resource_Image $image, $x1, $y1, $x2, $y2);
</pre>

        <p>
            Objetos de imagem devem ser criados com o método
            <code class="methodname">Zend_Pdf_Image::imageWithPath($filePath)</code> (imagens JPG, PNG e
            TIFF são suportadas agora):
        </p>

        <div class="example">
<a name="zend.pdf.drawing.image-drawing.example-1"></a><p class="title"><b>Exemplo 657. Desenhando imagens</b></p>
<div class="example-contents">
            

            <pre class="programlisting">
...
// load image
$image = Zend_Pdf_Image::imageWithPath('my_image.jpg');

$pdfPage-&gt;drawImage($image, 100, 100, 400, 300);
...
</pre>
        </div>
</div>
<br class="example-break">

        <p>
            <span class="emphasis"><em>Importante! O suporte a JPEG requer que a extensão <acronym class="acronym">PHP</acronym> GD
                esteja configurada.</em></span> <span class="emphasis"><em>Importante! O suporte a PNG requer que
                extensão ZLIB esteja configurada para trabalhar com imagens com canal
                Alpha.</em></span>
        </p>

        <p>
            Consulte a documentação do <acronym class="acronym">PHP</acronym> para informações detalhadas (<a class="ulink" href="http://www.php.net/manual/en/ref.image.php" target="_top">http://www.php.net/manual/en/ref.image.php</a>).
            (<a class="ulink" href="http://www.php.net/manual/en/ref.zlib.php" target="_top">http://www.php.net/manual/en/ref.zlib.php</a>).
        </p>
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.line-drawing-style"></a>Estilo de desenho de linhas</h3></div></div></div>
        

        <p>
            O desenho de linhas é definido pela largura, cor e padrão de traços. Todos estes
            parâmetros podem ser atribuídos pelos seguintes métodos da classe
            <code class="classname">Zend_Pdf_Page</code>:
        </p>

        <pre class="programlisting">
/** Set line color. */
public function setLineColor(Zend_Pdf_Color $color);

/** Set line width. */
public function setLineWidth(float $width);

/**
 * Set line dashing pattern.
 *
 * Pattern is an array of floats:
 *     array(on_length, off_length, on_length, off_length, ...)
 * Phase is shift from the beginning of line.
 *
 * @param array $pattern
 * @param array $phase
 * @return Zend_Pdf_Page
 */
public function setLineDashingPattern($pattern, $phase = 0);
</pre>
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.fill-style"></a>Estilo de preenchimento</h3></div></div></div>
        

        <p>
            Os métodos <code class="methodname">Zend_Pdf_Page::drawRectangle()</code>,
            <code class="methodname">Zend_Pdf_Page::drawPolygon()</code>,
            <code class="methodname">Zend_Pdf_Page::drawCircle()</code> e
            <code class="methodname">Zend_Pdf_Page::drawEllipse()</code> usam o argumento
            <code class="varname">$fillType</code> como um parâmetro opcional. Ele pode ser:
        </p>

        <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
                <p>Zend_Pdf_Page::SHAPE_DRAW_STROKE - pincelamento</p>
            </li>
<li class="listitem">
                <p>Zend_Pdf_Page::SHAPE_DRAW_FILL - apenas preenchimento</p>
            </li>
<li class="listitem">
                <p>
                    Zend_Pdf_Page::SHAPE_DRAW_FILL_AND_STROKE - preenchimento e pincelamento
                    (comportamento padrão)
                </p>
            </li>
</ul></div>

        <p>
            Os métodos <code class="methodname">Zend_Pdf_Page::drawPolygon()</code> também recebem um
            parâmetro adicional <code class="varname">$fillMethod</code>:
        </p>

        <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
                <p>Zend_Pdf_Page::FILL_METHOD_NON_ZERO_WINDING (comportamento padrão)</p>

                <p>
                    A <em class="citetitle">referência do PDF</em> descreve esta regra como:

                    </p>
<div class="blockquote"><blockquote class="blockquote">
                        <p>
                            A regra "nonzero winding number" determina se um dado ponto está dentro
                            de um caminho por conceitualmente desenhar um raio a partir desse ponto
                            até o infinito em qualquer direção e, em seguida, analisar os lugares
                            onde um segmento do caminho atravessa o raio. Começando a contagem do 0,
                            a regra acrescenta 1 cada vez que um segmento cruza o raio da esquerda
                            para a direita e subtrai 1 cada vez que um segmento cruza da direita
                            para a esquerda. Após a contagem de todos os cruzamentos, se o resultado
                            for 0 então o ponto está fora do caminho; de outra forma está dentro.
                            Nota: O método descrito não especifica o que fazer se um caminho
                            segmento coincide ou é tangente ao escolhido raio. Uma vez que a
                            direção do raio é arbitrária, a regra simplesmente escolhe um raio que
                            não encontra tais problemas de interseção. Para simples caminhos
                            convexos, a regra "nonzero winding number" define o interior e o
                            exterior como esperado intuitivamente. Os casos mais interessantes são
                            os envolvem caminhos complexos ou com auto-intersecção, como os que são
                            apresentados na Figura 4.10 (na Referência do <acronym class="acronym">PDF</acronym>).
                            Para um caminho que consiste em uma estrela de cinco pontas, desenhada
                            com cinco linhas retas conectadas se inter-seccionando, a regra
                            considera como sendo o interior toda a área delimitada pela estrela,
                            incluindo o pentágono no centro. Para um caminho composto de dois
                            círculos concêntricos, as áreas delimitadas por ambos os círculos são
                            consideradas como sendo o interior, desde que ambos os círculos sejam
                            desenhados na mesma direção. Se os círculos forem desenhados em direções
                            opostas, apenas a forma da "rosquinha" entre eles está no interior, de
                            acordo com a regra; o "buraco da rosquinha" está no exterior.
                        </p>
                    </blockquote></div>
<p>
                </p>
            </li>
<li class="listitem">
                <p>Zend_Pdf_Page::FILL_METHOD_EVEN_ODD</p>

                <p>
                    A <em class="citetitle">referência do PDF</em> descreve esta regra como:

                    </p>
<div class="blockquote"><blockquote class="blockquote">
                        <p>
                            Uma alternativa à regra "nonzero winding number" é a regra "even-odd".
                            Esta regra determina a "interiorização" de um ponto através do desenho
                            de um raio daquele ponto em qualquer direção e simplesmente contando a
                            quantidade de segmentos de caminhos que cruzam o raio, independentemente
                            da direção. Se a quantidade for ímpar, o ponto está no interior; se for
                            par está no exterior. Isto gera os mesmos resultados da regra "nonzero
                            winding number" para caminhos com formas simples, mas produz resultados
                            diferentes para os mais de forma mais complexa. A Figura 4.11 (na
                            Referência do <acronym class="acronym">PDF</acronym>) mostra os efeitos da aplicação da
                            regra "even-odd" para caminhos complexos. Para a estrela de cinco
                            pontas, a regra considera os pontos triangulares como estando no
                            interior do caminho, mas não o pentágono no centro. Para os dois
                            círculos concêntricos, apenas a forma da "rosquinha" entre os círculos é
                            considerada como interior, independentemente das direções em que eles
                            foram desenhados.
                        </p>
                    </blockquote></div>
<p>
                </p>
            </li>
</ul></div>
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.linear-transformations"></a>Transformações Lineares</h3></div></div></div>
        

        <div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="zend.pdf.drawing.linear-transformations.rotations"></a>Rotações</h4></div></div></div>
            

            <p>
                A página <acronym class="acronym">PDF</acronym> pode ser rotacionada antes do uso de qualquer
                operação de desenho. Isso pode ser feito pelo método
                <code class="methodname">Zend_Pdf_Page::rotate()</code>:
            </p>

            <pre class="programlisting">
/**
 * Rotate the page.
 *
 * @param float $x  - the X co-ordinate of rotation point
 * @param float $y  - the Y co-ordinate of rotation point
 * @param float $angle - rotation angle
 * @return Zend_Pdf_Page
 */
public function rotate($x, $y, $angle);
</pre>
        </div>

        <div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="zend.pdf.drawing.linear-transformations.scale"></a>Starting from ZF 1.8, scaling</h4></div></div></div>
            

            <p>
                Scaling transformation is provided by
                <code class="methodname">Zend_Pdf_Page::scale()</code> method:
            </p>

            <pre class="programlisting">
/**
 * Scale coordination system.
 *
 * @param float $xScale - X dimention scale factor
 * @param float $yScale - Y dimention scale factor
 * @return Zend_Pdf_Page
 */
public function scale($xScale, $yScale);
</pre>
        </div>

        <div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="zend.pdf.drawing.linear-transformations.translate"></a>Starting from ZF 1.8, translating</h4></div></div></div>
            

            <p>
                Coordinate system shifting is performed by
                <code class="methodname">Zend_Pdf_Page::translate()</code> method:
            </p>

            <pre class="programlisting">
/**
 * Translate coordination system.
 *
 * @param float $xShift - X coordinate shift
 * @param float $yShift - Y coordinate shift
 * @return Zend_Pdf_Page
 */
public function translate($xShift, $yShift);
</pre>
        </div>

        <div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="zend.pdf.drawing.linear-transformations.skew"></a>Starting from ZF 1.8, skewing</h4></div></div></div>
            

            <p>
                Page skewing can be done using <code class="methodname">Zend_Pdf_Page::skew()</code>
                method:
            </p>

            <pre class="programlisting">
/**
 * Translate coordination system.
 *
 * @param float $x  - the X co-ordinate of axis skew point
 * @param float $y  - the Y co-ordinate of axis skew point
 * @param float $xAngle - X axis skew angle
 * @param float $yAngle - Y axis skew angle
 * @return Zend_Pdf_Page
 */
public function skew($x, $y, $xAngle, $yAngle);
</pre>
        </div>
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.save-restore"></a>Salvar/restaurar estados gráficos</h3></div></div></div>
        

        <p>
            A qualquer hora os estados gráficos de uma página (fonte atual, tamanho da fonte, cor
            das linhas, cor de preenchimento, estilo de linha, rotação da página, e área de corte)
            podem ser salvos e então restaurados. Operações "Salvar" colocam os dados em uma pilha,
            as restaurações recuperam os estados da pilha.
        </p>

        <p>
            Existem dois métodos na classe <code class="classname">Zend_Pdf_Page</code> para essas
            operações:
        </p>

        <pre class="programlisting">
/**
 * Save the graphics state of this page.
 * This takes a snapshot of the currently applied style, position,
 * clipping area and any rotation/translation/scaling that has been
 * applied.
 *
 * @return Zend_Pdf_Page
 */
public function saveGS();

/**
 * Restore the graphics state that was saved with the last call to
 * saveGS().
 *
 * @return Zend_Pdf_Page
 */
public function restoreGS();
</pre>
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.clipping"></a>Recorte de área de desenho</h3></div></div></div>
        

        <p>
            O <acronym class="acronym">PDF</acronym> e o módulo <code class="classname">Zend_Pdf</code> dão suporte ao
            recorte de áreas de desenho. O recorte da área atual limita as regiões da página que
            serão afetadas por operações de pintura. Inicialmente é a página toda.
        </p>

        <p>
            A classe <code class="classname">Zend_Pdf_Page</code> fornece um conjunto de métodos para
            operações de recorte.
        </p>

        <pre class="programlisting">
/**
 * Intersect current clipping area with a rectangle.
 *
 * @param float $x1
 * @param float $y1
 * @param float $x2
 * @param float $y2
 * @return Zend_Pdf_Page
 */
public function clipRectangle($x1, $y1, $x2, $y2);
</pre>

        <pre class="programlisting">
/**
 * Intersect current clipping area with a polygon.
 *
 * @param array $x  - array of float (the X co-ordinates of the vertices)
 * @param array $y  - array of float (the Y co-ordinates of the vertices)
 * @param integer $fillMethod
 * @return Zend_Pdf_Page
 */
public function clipPolygon($x,
                            $y,
                            $fillMethod =
                                Zend_Pdf_Page::FILL_METHOD_NON_ZERO_WINDING);
</pre>

        <pre class="programlisting">
/**
 * Intersect current clipping area with a circle.
 *
 * @param float $x
 * @param float $y
 * @param float $radius
 * @param float $startAngle
 * @param float $endAngle
 * @return Zend_Pdf_Page
 */
public function clipCircle($x,
                           $y,
                           $radius,
                           $startAngle = null,
                           $endAngle = null);
</pre>

        <pre class="programlisting">
/**
 * Intersect current clipping area with an ellipse.
 *
 * Method signatures:
 * drawEllipse($x1, $y1, $x2, $y2);
 * drawEllipse($x1, $y1, $x2, $y2, $startAngle, $endAngle);
 *
 * @todo process special cases with $x2-$x1 == 0 or $y2-$y1 == 0
 *
 * @param float $x1
 * @param float $y1
 * @param float $x2
 * @param float $y2
 * @param float $startAngle
 * @param float $endAngle
 * @return Zend_Pdf_Page
 */
public function clipEllipse($x1,
                            $y1,
                            $x2,
                            $y2,
                            $startAngle = null,
                            $endAngle = null);
</pre>
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.styles"></a>Estilos</h3></div></div></div>
        

        <p>
            A classe <code class="classname">Zend_Pdf_Style</code> fornece funcionalidades de estilo.
        </p>

        <p>
            Estilos podem ser usados para o armazenamento de um conjunto de parâmetros do estado
            gráfico e aplicá-los à uma página <acronym class="acronym">PDF</acronym> com uma operação:
        </p>

        <pre class="programlisting">
/**
 * Set the style to use for future drawing operations on this page
 *
 * @param Zend_Pdf_Style $style
 * @return Zend_Pdf_Page
 */
public function setStyle(Zend_Pdf_Style $style);

/**
 * Return the style, applied to the page.
 *
 * @return Zend_Pdf_Style|null
 */
public function getStyle();
</pre>

        <p>
            A classe <code class="classname">Zend_Pdf_Style</code> fornece um conjunto de métodos para
            configurar ou recuperar diferentes parâmetros do estado gráfico:
        </p>

        <pre class="programlisting">
/**
 * Set line color.
 *
 * @param Zend_Pdf_Color $color
 * @return Zend_Pdf_Page
 */
public function setLineColor(Zend_Pdf_Color $color);
</pre>

        <pre class="programlisting">
/**
 * Get line color.
 *
 * @return Zend_Pdf_Color|null
 */
public function getLineColor();
</pre>

        <pre class="programlisting">
/**
 * Set line width.
 *
 * @param float $width
 * @return Zend_Pdf_Page
 */
public function setLineWidth($width);
</pre>

        <pre class="programlisting">
/**
 * Get line width.
 *
 * @return float
 */
public function getLineWidth();
</pre>

        <pre class="programlisting">
/**
 * Set line dashing pattern
 *
 * @param array $pattern
 * @param float $phase
 * @return Zend_Pdf_Page
 */
public function setLineDashingPattern($pattern, $phase = 0);
</pre>

        <pre class="programlisting">
/**
 * Get line dashing pattern
 *
 * @return array
 */
public function getLineDashingPattern();
</pre>

        <pre class="programlisting">
/**
 * Get line dashing phase
 *
 * @return float
 */
public function getLineDashingPhase();
</pre>

        <pre class="programlisting">
/**
 * Set fill color.
 *
 * @param Zend_Pdf_Color $color
 * @return Zend_Pdf_Page
 */
public function setFillColor(Zend_Pdf_Color $color);
</pre>

        <pre class="programlisting">
/**
 * Get fill color.
 *
 * @return Zend_Pdf_Color|null
 */
public function getFillColor();
</pre>

        <pre class="programlisting">
/**
 * Set current font.
 *
 * @param Zend_Pdf_Resource_Font $font
 * @param float $fontSize
 * @return Zend_Pdf_Page
 */
public function setFont(Zend_Pdf_Resource_Font $font, $fontSize);
</pre>

        <pre class="programlisting">
/**
 * Modify current font size
 *
 * @param float $fontSize
 * @return Zend_Pdf_Page
 */
public function setFontSize($fontSize);
</pre>

        <pre class="programlisting">
/**
 * Get current font.
 *
 * @return Zend_Pdf_Resource_Font $font
 */
public function getFont();
</pre>

        <pre class="programlisting">
/**
 * Get current font size
 *
 * @return float $fontSize
 */
public function getFontSize();
</pre>
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.alpha"></a>Transparency</h3></div></div></div>
        

        <p>
            <code class="classname">Zend_Pdf</code> module supports transparency handling.
        </p>

        <p>
            Transparency may be set using <code class="methodname">Zend_Pdf_Page::setAlpha()</code> method:
        </p>

        <pre class="programlisting">
/**
 * Set the transparency
 *
 * $alpha == 0  - transparent
 * $alpha == 1  - opaque
 *
 * Transparency modes, supported by PDF:
 * Normal (default), Multiply, Screen, Overlay, Darken, Lighten,
 * ColorDodge, ColorBurn, HardLight, SoftLight, Difference, Exclusion
 *
 * @param float $alpha
 * @param string $mode
 * @throws Zend_Pdf_Exception
 * @return Zend_Pdf_Page
 */
public function setAlpha($alpha, $mode = 'Normal');
</pre>
    </div>
</div>
<div class="navfooter"><table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="zend.pdf.pages.html">Anterior</a> </td>
<td width="20%" align="center"><a accesskey="u" href="zend.pdf.html">Acima</a></td>
<td width="40%" align="right"> <a accesskey="n" href="zend.pdf.interactive-features.html">Próxima</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">Trabalhando com Páginas </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">Principal</a></td>
<td width="40%" align="right" valign="top"> Interactive Features</td>
</tr>
</table></div>
<div class="revinfo"></div>
</body>
</html>
