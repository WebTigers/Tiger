<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Zend_Cache Backends</title>
<link rel="stylesheet" type="text/css" href="dbstyle.css">
<meta name="generator" content="DocBook XSL Stylesheets V1.79.2">
<link rel="home" href="index.html" title="Programmer's Reference Guide">
<link rel="up" href="zend.cache.html" title="Zend_Cache">
<link rel="prev" href="zend.cache.frontends.html" title="Zend_Cache Frontends">
<link rel="next" href="zend.cache.cache.manager.html" title="The Cache Manager">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader"><table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">Zend_Cache Backends</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="zend.cache.frontends.html">Prev</a> </td>
<th width="60%" align="center">Zend_Cache</th>
<td width="20%" align="right"> <a accesskey="n" href="zend.cache.cache.manager.html">Next</a>
</td>
</tr>
</table></div>
<div class="sect1">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="zend.cache.backends"></a>Zend_Cache Backends</h2></div></div></div>
    

    <p>
        There are two kinds of backends: standard ones and extended ones. Of course, extended
        backends offer more features.
    </p>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.cache.backends.file"></a>Zend_Cache_Backend_File</h3></div></div></div>
        

        <p>
            This (extended) backends stores cache records into files (in a chosen directory).
        </p>

        <p>
            Available options are :
        </p>

        <div class="table">
<a name="zend.cache.backends.file.table"></a><p class="title"><b>Table 25. File Backend Options</b></p>
<div class="table-contents">
            

            <table class="table" summary="File Backend Options" border="1">
<colgroup>
<col>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>Option</th>
<th>Data Type</th>
<th>Default Value</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td><span class="emphasis"><em>cache_dir</em></span></td>
<td><span class="type">String</span></td>
<td>[system temp dir]</td>
<td>Directory where to store cache files</td>
</tr>
<tr>
<td><span class="emphasis"><em>file_locking</em></span></td>
<td><span class="type">Boolean</span></td>
<td><code class="constant">TRUE</code></td>
<td>
                            Enable or disable file_locking : Can avoid cache corruption under
                            bad circumstances but it doesn't help on multithread webservers
                            or on <acronym class="acronym">NFS</acronym> filesystems...
                        </td>
</tr>
<tr>
<td><span class="emphasis"><em>read_control</em></span></td>
<td><span class="type">Boolean</span></td>
<td><code class="constant">TRUE</code></td>
<td>
                            Enable / disable read control : if enabled, a control key is
                            embedded in the cache file and this key is compared with the
                            one calculated after the reading.
                        </td>
</tr>
<tr>
<td><span class="emphasis"><em>read_control_type</em></span></td>
<td><span class="type">String</span></td>
<td>'crc32'</td>
<td>
                            Type of read control (only if read control is enabled). Available values
                            are : 'md5' (best but slowest), 'crc32' (lightly less safe but faster,
                            better choice), 'adler32' (new choice, faster than crc32),
                            'strlen' for a length only test (fastest).
                        </td>
</tr>
<tr>
<td><span class="emphasis"><em>hashed_directory_level</em></span></td>
<td><span class="type">Integer</span></td>
<td>0</td>
<td>
                            Hashed directory structure level : 0 means "no hashed directory
                            structure", 1 means "one level of directory", 2 means "two levels"...
                            This option can speed up the cache only when you have many thousands of
                            cache files. Only specific benchs can help you to choose the perfect
                            value for you. Maybe, 1 or 2 is a good start.
                        </td>
</tr>
<tr>
<td><span class="emphasis"><em>hashed_directory_perm</em></span></td>
<td><span class="type">Integer</span></td>
<td>0700</td>
<td>Permissions for the hashed directory structure</td>
</tr>
<tr>
<td><span class="emphasis"><em>file_name_prefix</em></span></td>
<td><span class="type">String</span></td>
<td>'zend_cache'</td>
<td>
                            prefix for cache files ; be really careful with this option because
                            a too generic value in a system cache dir
                            (like <code class="filename">/tmp</code>) can cause disasters when cleaning
                            the cache
                        </td>
</tr>
<tr>
<td><span class="emphasis"><em>cache_file_umask</em></span></td>
<td><span class="type">Integer</span></td>
<td>0600</td>
<td>umask for cache files</td>
</tr>
<tr>
<td><span class="emphasis"><em>cache_file_perm</em></span></td>
<td><span class="type">Integer</span></td>
<td>0600</td>
<td>Permissions for cache files</td>
</tr>
<tr>
<td><span class="emphasis"><em>metatadatas_array_max_size</em></span></td>
<td><span class="type">Integer</span></td>
<td>100</td>
<td>
                            internal max size for the metadatas array (don't change this value
                            unless you know what you are doing)
                        </td>
</tr>
</tbody>
</table>
        </div>
</div>
<br class="table-break">
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.cache.backends.sqlite"></a>Zend_Cache_Backend_Sqlite</h3></div></div></div>
        

        <p>
            This (extended) backends stores cache records into a SQLite database.
        </p>

        <p>
            Available options are :
        </p>

        <div class="table">
<a name="zend.cache.backends.sqlite.table"></a><p class="title"><b>Table 26. Sqlite Backend Options</b></p>
<div class="table-contents">
            

            <table class="table" summary="Sqlite Backend Options" border="1">
<colgroup>
<col>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>Option</th>
<th>Data Type</th>
<th>Default Value</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td><span class="emphasis"><em>cache_db_complete_path (mandatory)</em></span></td>
<td><span class="type">String</span></td>
<td><code class="constant">NULL</code></td>
<td>
                            The complete path (filename included) of the SQLite database
                        </td>
</tr>
<tr>
<td><span class="emphasis"><em>automatic_vacuum_factor</em></span></td>
<td><span class="type">Integer</span></td>
<td>10</td>
<td>
                            Disable / Tune the automatic vacuum process. The automatic vacuum
                            process defragment the database file (and make it smaller) when a
                            <code class="methodname">clean()</code> or <code class="methodname">delete()</code>
                            is called: 0 means no automatic vacuum ; 1 means systematic vacuum
                            (when <code class="methodname">delete()</code> or
                            <code class="methodname">clean()</code> methods are called) ; x (integer) &gt;
                            1 =&gt; automatic vacuum randomly 1 times on x
                            <code class="methodname">clean()</code> or
                            <code class="methodname">delete()</code>.
                        </td>
</tr>
</tbody>
</table>
        </div>
</div>
<br class="table-break">
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.cache.backends.memcached"></a>Zend_Cache_Backend_Memcached</h3></div></div></div>
        

        <p>
            This (extended) backends stores cache records into a memcached server. <a class="ulink" href="http://www.danga.com/memcached/" target="_top">memcached</a> is a high-performance,
            distributed memory object caching system. To use this backend, you need a memcached
            daemon and <a class="ulink" href="http://pecl.php.net/package/memcache" target="_top">the memcache
                <acronym class="acronym">PECL</acronym> extension</a>.
        </p>

        <p>
            Be careful : with this backend, "tags" are not supported for the moment as
            the "doNotTestCacheValidity=true" argument.
        </p>

        <p>
            Available options are :
        </p>

        <div class="table">
<a name="zend.cache.backends.memcached.table"></a><p class="title"><b>Table 27. Memcached Backend Options</b></p>
<div class="table-contents">
            

            <table class="table" summary="Memcached Backend Options" border="1">
<colgroup>
<col>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>Option</th>
<th>Data Type</th>
<th>Default Value</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td><span class="emphasis"><em>servers</em></span></td>
<td><span class="type">Array</span></td>
<td>
                            <span class="command"><strong>array(array('host' =&gt; 'localhost', 'port' =&gt; 11211,
                                'persistent' =&gt; true, 'weight' =&gt; 1, 'timeout' =&gt; 5,
                                'retry_interval' =&gt; 15, 'status' =&gt; true,
                                'failure_callback' =&gt; '' ))</strong></span>
                        </td>
<td>
                            An array of memcached servers ; each memcached server is described by
                            an associative array : 'host' =&gt; (string) : the name of the memcached
                            server, 'port' =&gt; (int) : the port of the memcached server,
                            'persistent' =&gt; (bool) : use or not persistent connections to this
                            memcached server 'weight' =&gt; (int) :the weight of the memcached
                            server, 'timeout' =&gt; (int) :the time out of the memcached server,
                            'retry_interval' =&gt; (int) :the retry interval of the memcached server,
                            'status' =&gt; (bool) :the status of the memcached server,
                            'failure_callback' =&gt; (callback) : the failure_callback of the
                            memcached server
                        </td>
</tr>
<tr>
<td><span class="emphasis"><em>compression</em></span></td>
<td><span class="type">Boolean</span></td>
<td><code class="constant">FALSE</code></td>
<td>
                            <code class="constant">TRUE</code> if you want to use on-the-fly compression
                        </td>
</tr>
<tr>
<td><span class="emphasis"><em>compatibility</em></span></td>
<td><span class="type">Boolean</span></td>
<td><code class="constant">FALSE</code></td>
<td>
                            <code class="constant">TRUE</code> if you want to use this compatibility mode
                            with old memcache servers or extensions
                        </td>
</tr>
</tbody>
</table>
        </div>
</div>
<br class="table-break">
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.cache.backends.libmemcached"></a>Zend_Cache_Backend_Libmemcached</h3></div></div></div>
        

        <p>
            This (extended) backend stores cache records into a memcached server. <a class="ulink" href="http://www.danga.com/memcached/" target="_top">memcached</a> is a high-performance,
            distributed memory object caching system. To use this backend, you need a memcached
            daemon and <a class="ulink" href="http://pecl.php.net/package/memcached" target="_top">the memcached
                <acronym class="acronym">PECL</acronym> extension</a>.
        </p>

        <p>
            Be careful : with this backend, "tags" are not supported for the moment as
            the "doNotTestCacheValidity=true" argument.
        </p>

        <p>
            Available options are :
        </p>

        <div class="table">
<a name="zend.cache.backends.libmemcached.table"></a><p class="title"><b>Table 28. Libmemcached Backend Options</b></p>
<div class="table-contents">
            

            <table class="table" summary="Libmemcached Backend Options" border="1">
<colgroup>
<col>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>Option</th>
<th>Data Type</th>
<th>Default Value</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td><span class="emphasis"><em>servers</em></span></td>
<td><span class="type">Array</span></td>
<td>
                            <span class="command"><strong>array(array('host' =&gt; 'localhost', 'port' =&gt; 11211,
                            'weight' =&gt; 1))</strong></span>
                        </td>
<td>
                            An array of memcached servers ; each memcached server is described by
                            an associative array:
                            'host' =&gt; (string) : the name of the memcached server,
                            'port' =&gt; (int) : the port of the memcached server,
                            'weight' =&gt; (int) :the weight of the memcached server
                        </td>
</tr>
<tr>
<td><span class="emphasis"><em>client</em></span></td>
<td><span class="type">Array</span></td>
<td>
                            <span class="command"><strong>array(
                                Memcached::OPT_DISTRIBUTION =&gt; Memcached::DISTRIBUTION_CONSISTENT,
                                Memcached::OPT_HASH =&gt; Memcached::HASH_MD5,
                                Memcached::OPT_LIBKETAMA_COMPATIBLE =&gt; true
                            )</strong></span>
                        </td>
<td>
                            An associative array of memcached client options ;
                            The array key can be the name of the memcached option constant
                            (without 'OPT_') or the integer value of it.
                            See <a class="ulink" href="http://php.net/manual/memcached.constants.php" target="_top">
                                Memcached constants on <acronym class="acronym">PHP</acronym> manual</a>
                        </td>
</tr>
</tbody>
</table>
        </div>
</div>
<br class="table-break">
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.cache.backends.apc"></a>Zend_Cache_Backend_Apc</h3></div></div></div>
        

        <p>
            This (extended) backends stores cache records in shared memory through
            the <a class="ulink" href="http://pecl.php.net/package/APC" target="_top">APC</a> (Alternative
            <acronym class="acronym">PHP</acronym> Cache) extension (which is of course need for using this
            backend).
        </p>

        <p>
            Be careful : with this backend, "tags" are not supported for the moment as
            the "doNotTestCacheValidity=true" argument.
        </p>

        <p>
            There is no option for this backend.
        </p>
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.cache.backends.xcache"></a>Zend_Cache_Backend_Xcache</h3></div></div></div>
        

        <p>
            This backends stores cache records in shared memory through
            the <a class="ulink" href="http://xcache.lighttpd.net/" target="_top">XCache</a> extension
            (which is of course need for using this backend).
        </p>

        <p>
            Be careful : with this backend, "tags" are not supported for the moment as
            the "doNotTestCacheValidity=true" argument.
        </p>

        <p>
            Available options are :
        </p>

        <div class="table">
<a name="zend.cache.backends.xcache.table"></a><p class="title"><b>Table 29. Xcache Backend Options</b></p>
<div class="table-contents">
            

            <table class="table" summary="Xcache Backend Options" border="1">
<colgroup>
<col>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>Option</th>
<th>Data Type</th>
<th>Default Value</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td><span class="emphasis"><em>user</em></span></td>
<td><span class="type">String</span></td>
<td><code class="constant">NULL</code></td>
<td>
                            <code class="filename">xcache.admin.user</code>, necessary for the
                            <code class="methodname">clean()</code> method
                        </td>
</tr>
<tr>
<td><span class="emphasis"><em>password</em></span></td>
<td><span class="type">String</span></td>
<td><code class="constant">NULL</code></td>
<td>
                            <code class="filename">xcache.admin.pass</code> (in clear form, not
                            <acronym class="acronym">MD5</acronym>), necessary for the
                            <code class="methodname">clean()</code> method
                        </td>
</tr>
</tbody>
</table>
        </div>
</div>
<br class="table-break">
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.cache.backends.platform"></a>Zend_Cache_Backend_ZendPlatform</h3></div></div></div>
        

        <p>
            This backend uses content caching <acronym class="acronym">API</acronym> of the <a class="ulink" href="http://www.zend.com/en/products/platform/" target="_top">Zend Platform</a> product.
            Naturally, to use this backend you need to have Zend Platform installed.
        </p>

        <p>
            This backend supports tags, but does not support
            <code class="constant">CLEANING_MODE_NOT_MATCHING_TAG</code> cleaning mode.
        </p>

        <p>
            Specify this backend using a word separator -- '-', '.', ' ', or '_'
            -- between the words 'Zend' and 'Platform' when using the
            <code class="methodname">Zend_Cache::factory()</code> method:
        </p>

        <pre class="programlisting">
$cache = Zend_Cache::factory('Core', 'Zend Platform');
</pre>

        <p>
            There are no options for this backend.
        </p>
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.cache.backends.twolevels"></a>Zend_Cache_Backend_TwoLevels</h3></div></div></div>
        

        <p>
            This (extend) backend is an hybrid one. It stores cache records in two other backends :
            a fast one (but limited) like Apc, Memcache... and a "slow" one like File, Sqlite...
        </p>

        <p>
            This backend will use the priority parameter (given at the frontend level when storing a
            record) and the remaining space in the fast backend to optimize the usage of these two
            backends.
        </p>

        <p>
            Specify this backend using a word separator -- '-', '.', ' ', or '_'
            -- between the words 'Two' and 'Levels' when using the
            <code class="methodname">Zend_Cache::factory()</code> method:
        </p>

        <pre class="programlisting">
$cache = Zend_Cache::factory('Core', 'Two Levels');
</pre>

        <p>
            Available options are :
        </p>

        <div class="table">
<a name="zend.cache.backends.twolevels.table"></a><p class="title"><b>Table 30. TwoLevels Backend Options</b></p>
<div class="table-contents">
            

            <table class="table" summary="TwoLevels Backend Options" border="1">
<colgroup>
<col>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>Option</th>
<th>Data Type</th>
<th>Default Value</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td><span class="emphasis"><em>slow_backend</em></span></td>
<td><span class="type">String</span></td>
<td>File</td>
<td>the "slow" backend name</td>
</tr>
<tr>
<td><span class="emphasis"><em>fast_backend</em></span></td>
<td><span class="type">String</span></td>
<td>Apc</td>
<td>the "fast" backend name</td>
</tr>
<tr>
<td><span class="emphasis"><em>slow_backend_options</em></span></td>
<td><span class="type">Array</span></td>
<td><code class="methodname">array()</code></td>
<td>the "slow" backend options</td>
</tr>
<tr>
<td><span class="emphasis"><em>fast_backend_options</em></span></td>
<td><span class="type">Array</span></td>
<td><code class="methodname">array()</code></td>
<td>the "fast" backend options</td>
</tr>
<tr>
<td><span class="emphasis"><em>slow_backend_custom_naming</em></span></td>
<td><span class="type">Boolean</span></td>
<td><code class="constant">FALSE</code></td>
<td>
                            if <code class="constant">TRUE</code>, the slow_backend argument is used as a
                            complete class name; if <code class="constant">FALSE</code>,
                            the frontend argument is used as the end of
                            "<code class="classname">Zend_Cache_Backend_</code>[...]" class name
                        </td>
</tr>
<tr>
<td><span class="emphasis"><em>fast_backend_custom_naming</em></span></td>
<td><span class="type">Boolean</span></td>
<td><code class="constant">FALSE</code></td>
<td>
                            if <code class="constant">TRUE</code>, the fast_backend argument is used as a
                            complete class name; if <code class="constant">FALSE</code>,
                            the frontend argument is used as the end of
                            "<code class="classname">Zend_Cache_Backend_</code>[...]" class name
                        </td>
</tr>
<tr>
<td><span class="emphasis"><em>slow_backend_autoload</em></span></td>
<td><span class="type">Boolean</span></td>
<td><code class="constant">FALSE</code></td>
<td>
                            if <code class="constant">TRUE</code>, there will no require_once for the
                            slow backend (useful only for custom backends)
                        </td>
</tr>
<tr>
<td><span class="emphasis"><em>fast_backend_autoload</em></span></td>
<td><span class="type">Boolean</span></td>
<td><code class="constant">FALSE</code></td>
<td>
                            if <code class="constant">TRUE</code>, there will no require_once for the fast
                            backend (useful only for custom backends)
                        </td>
</tr>
<tr>
<td><span class="emphasis"><em>auto_refresh_fast_cache</em></span></td>
<td><span class="type">Boolean</span></td>
<td><code class="constant">TRUE</code></td>
<td>
                            if <code class="constant">TRUE</code>, auto refresh the fast cache when a
                            cache record is hit
                        </td>
</tr>
<tr>
<td><span class="emphasis"><em>stats_update_factor</em></span></td>
<td><span class="type">Integer</span></td>
<td>10</td>
<td>
                            disable / tune the computation of the fast backend filling percentage
                            (when saving a record into cache, computation of the fast backend
                            filling percentage randomly 1 times on x cache writes)
                        </td>
</tr>
</tbody>
</table>
        </div>
</div>
<br class="table-break">
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.cache.backends.zendserver"></a>Zend_Cache_Backend_ZendServer_Disk and Zend_Cache_Backend_ZendServer_ShMem</h3></div></div></div>
        

        <p>
            These backends store cache records using <a class="ulink" href="http://www.zend.com/en/products/server/downloads-all?zfs=zf_download" target="_top">Zend
                Server</a> caching functionality.
        </p>

        <p>
             Be careful: with these backends, "tags" are not supported for the moment as the
             "doNotTestCacheValidity=true" argument.
        </p>

        <p>
             These backend work only withing Zend Server environment for pages requested through
             <acronym class="acronym">HTTP</acronym> or <acronym class="acronym">HTTPS</acronym> and don't work for command line
             script execution
        </p>

        <p>
            Specify this backend using parameter <span class="emphasis"><em>customBackendNaming</em></span> as
            <code class="constant">TRUE</code> when using the <code class="methodname">Zend_Cache::factory()</code>
            method:
        </p>

        <pre class="programlisting">
$cache = Zend_Cache::factory('Core', 'Zend_Cache_Backend_ZendServer_Disk',
                             $frontendOptions, $backendOptions, false, true);
</pre>

        <p>
            There is no option for this backend.
        </p>
    </div>

    <div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.cache.backends.static"></a>Zend_Cache_Backend_Static</h3></div></div></div>
        

        <p>
            This backend works in concert with <code class="classname">Zend_Cache_Frontend_Capture</code>
            (the two must be used together) to save the output from requests as static files. This
            means the static files are served directly on subsequent requests without any
            involvement of <acronym class="acronym">PHP</acronym> or Zend Framework at all.
        </p>

        <div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="/assets/manual/img/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
                <p>
                    <code class="classname">Zend_Cache_Frontend_Capture</code> operates
                    by registering a callback function to be called
                    when the output buffering it uses is cleaned. In order for this to operate
                    correctly, it must be the final output buffer in the request. To guarantee
                    this, the output buffering used by the Dispatcher <span class="emphasis"><em>must</em></span> be
                    disabled by calling <code class="classname">Zend_Controller_Front</code>'s
                    <code class="methodname">setParam()</code> method, for example,
                    <span class="command"><strong>$front-&gt;setParam('disableOutputBuffering', true);</strong></span> or adding
                    "resources.frontcontroller.params.disableOutputBuffering = true"
                    to your bootstrap configuration file (assumed <acronym class="acronym">INI</acronym>) if using
                    <code class="classname">Zend_Application</code>.
                </p>
            </td></tr>
</table></div>

        <p>
            The benefits of this cache include a large throughput increase since
            all subsequent requests return the static file and don't need any
            dynamic processing. Of course this also has some disadvantages. The
            only way to retry the dynamic request is to purge the cached file
            from elsewhere in the application (or via a cronjob if timed). It
            is also restricted to single-server applications where only one
            filesystem is used. Nevertheless, it can be a powerful means of
            getting more performance without incurring the cost of a proxy on
            single machines.
        </p>

        <p>
            Before describing its options, you should note this needs some
            changes to the default <code class="filename">.htaccess</code> file in order for requests to be
            directed to the static files if they exist. Here's an example of
            a simple application caching some content, including two specific
            feeds which need additional treatment to serve a correct
            Content-Type header:
        </p>

        <pre class="programlisting">
AddType application/rss+xml .xml
AddType application/atom+xml .xml

RewriteEngine On

RewriteCond %{REQUEST_URI} feed/rss$
RewriteCond %{DOCUMENT_ROOT}/cached/%{REQUEST_URI}.xml -f
RewriteRule .* cached/%{REQUEST_URI}.xml [L,T=application/rss+xml]

RewriteCond %{REQUEST_URI} feed/atom$
RewriteCond %{DOCUMENT_ROOT}/cached/%{REQUEST_URI}.xml -f
RewriteRule .* cached/%{REQUEST_URI}.xml [L,T=application/atom+xml]

RewriteCond %{DOCUMENT_ROOT}/cached/index.html -f
RewriteRule ^/*$ cached/index.html [L]
RewriteCond %{DOCUMENT_ROOT}/cached/%{REQUEST_URI}.(html|xml|json|opml|svg) -f
RewriteRule .* cached/%{REQUEST_URI}.%1 [L]

RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]

RewriteRule ^.*$ index.php [NC,L]
</pre>

        <p>
            The above assumes static files are cached to the directory
            <code class="filename">./public/cached</code>. We'll cover the option setting this location,
            "public_dir", below.
        </p>

        <p>
            Due to the nature of static file caching, the backend class offers two additional
            methods: <code class="methodname">remove()</code> and
            <code class="methodname">removeRecursively()</code>. Both accept a request
            <acronym class="acronym">URI</acronym>, which when mapped to the "public_dir" where static files are
            cached, and has a pre-stored extension appended, provides the name of either a static
            file to delete, or a directory path to delete recursively. Due to the
            restraints of <code class="classname">Zend_Cache_Backend_Interface</code>, all
            other methods such as <code class="methodname">save()</code> accept an ID which
            is calculated by applying <code class="methodname">bin2hex()</code> to a request
            <acronym class="acronym">URI</acronym>.
        </p>

        <p>
            Given the level at which static caching operates, static file caching is addressed for
            simpler use with the <code class="classname">Zend_Controller_Action_Helper_Cache</code> action
            helper. This helper assists in setting which actions of a controller to cache, with what
            tags, and with which extension. It also offers methods for purging the cache by request
            <acronym class="acronym">URI</acronym> or tag. Static file caching is also assisted by
            <code class="classname">Zend_Cache_Manager</code> which includes pre-configured configuration
            templates for a static cache (as <code class="constant">Zend_Cache_Manager::PAGECACHE</code> or
            "page"). The defaults therein can be configured as needed to set up a "public_dir"
            location for caching, etc.
        </p>

        <div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="/assets/manual/img/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
            <p>
                It should be noted that the static cache actually uses a secondary cache to store
                tags (obviously we can't store them elsewhere since a static cache does not invoke
                <acronym class="acronym">PHP</acronym> if working correctly). This is just a standard Core cache,
                and should use a persistent backend such as File or TwoLevels (to take advantage of
                memory storage without sacrificing permanent persistance). The backend includes the
                option "tag_cache" to set this up (it is obligatory), or the
                <code class="methodname">setInnerCache()</code> method.
            </p>
        </td></tr>
</table></div>

        <div class="table">
<a name="zend.cache.backends.static.table"></a><p class="title"><b>Table 31. Static Backend Options</b></p>
<div class="table-contents">
            

            <table class="table" summary="Static Backend Options" border="1">
<colgroup>
<col>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>Option</th>
<th>Data Type</th>
<th>Default Value</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td><span class="emphasis"><em>public_dir</em></span></td>
<td><span class="type">String</span></td>
<td><code class="constant">NULL</code></td>
<td>
                            Directory where to store static files. This must exist
                            in your public directory.
                        </td>
</tr>
<tr>
<td><span class="emphasis"><em>file_locking</em></span></td>
<td><span class="type">Boolean</span></td>
<td><code class="constant">TRUE</code></td>
<td>
                            Enable or disable file_locking : Can avoid cache corruption under
                            bad circumstances but it doesn't help on multithread webservers
                            or on <acronym class="acronym">NFS</acronym> filesystems...
                        </td>
</tr>
<tr>
<td><span class="emphasis"><em>read_control</em></span></td>
<td><span class="type">Boolean</span></td>
<td><code class="constant">TRUE</code></td>
<td>
                            Enable / disable read control : if enabled, a control key is
                            embedded in the cache file and this key is compared with the
                            one calculated after the reading.
                        </td>
</tr>
<tr>
<td><span class="emphasis"><em>read_control_type</em></span></td>
<td><span class="type">String</span></td>
<td>'crc32'</td>
<td>
                            Type of read control (only if read control is enabled). Available values
                            are : 'md5' (best but slowest), 'crc32' (lightly less safe but faster,
                            better choice), 'adler32' (new choice, faster than crc32),
                            'strlen' for a length only test (fastest).
                        </td>
</tr>
<tr>
<td><span class="emphasis"><em>cache_file_umask</em></span></td>
<td><span class="type">Integer</span></td>
<td>0600</td>
<td>umask for cached files.</td>
</tr>
<tr>
<td><span class="emphasis"><em>cache_directory_umask</em></span></td>
<td><span class="type">Integer</span></td>
<td>0700</td>
<td>Umask for directories created within public_dir.</td>
</tr>
<tr>
<td><span class="emphasis"><em>file_extension</em></span></td>
<td><span class="type">String</span></td>
<td>'<code class="filename">.html</code>'</td>
<td>
                            Default file extension for static files created. This can be
                            configured on the fly, see
                            <code class="methodname">Zend_Cache_Backend_Static::save()</code> though
                            generally it's recommended to rely on
                            <code class="classname">Zend_Controller_Action_Helper_Cache</code> when
                            doing so since it's simpler that way than messing with
                            arrays or serialization manually.
                        </td>
</tr>
<tr>
<td><span class="emphasis"><em>index_filename</em></span></td>
<td><span class="type">String</span></td>
<td>'index'</td>
<td>
                            If a request <acronym class="acronym">URI</acronym> does not contain sufficient
                            information to construct a static file (usually this means an index
                            call, e.g. <acronym class="acronym">URI</acronym> of '/'), the index_filename is used
                            instead. So '' or '/' would map to '<code class="filename">index.html</code>'
                            (assuming the default file_extension is '<code class="filename">.html</code>').
                        </td>
</tr>
<tr>
<td><span class="emphasis"><em>tag_cache</em></span></td>
<td><span class="type">Object</span></td>
<td><code class="constant">NULL</code></td>
<td>
                            Used to set an 'inner' cache utilised to store tags
                            and file extensions associated with static files. This
                            <span class="emphasis"><em>must</em></span> be set or the static cache cannot be tracked
                            and managed.
                        </td>
</tr>
<tr>
<td><span class="emphasis"><em>disable_caching</em></span></td>
<td><span class="type">Boolean</span></td>
<td><code class="constant">FALSE</code></td>
<td>
                            If set to <code class="constant">TRUE</code>, static files will not be cached.
                            This will force all requests to be dynamic even if marked
                            to be cached in Controllers. Useful for debugging.
                        </td>
</tr>
</tbody>
</table>
        </div>
</div>
<br class="table-break">
    </div>
</div>
<div class="navfooter"><table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="zend.cache.frontends.html">Prev</a> </td>
<td width="20%" align="center"><a accesskey="u" href="zend.cache.html">Up</a></td>
<td width="40%" align="right"> <a accesskey="n" href="zend.cache.cache.manager.html">Next</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">Zend_Cache Frontends </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td>
<td width="40%" align="right" valign="top"> The Cache Manager</td>
</tr>
</table></div>
<div class="revinfo"></div>
</body>
</html>
